[Configuration]
#!! List of the config you want to use
#!! The number of config has to be exaclty 7. Will include only essential configuration files for now
#!! The list only support spaces between configs
List = paths.ini general.ini cuts.ini training.ini datacards.ini plots.ini lhe_weights.ini samples_nosplit.ini


# "PSI" or "pisa"
whereToLaunch = PSI
channel = VBF
;channel = Znn
nprocesses = 0

user = nchernya


[Directories]
#!! just a variable
Dname: logs_v20
#!! Working Directory
scratch = /scratch/<!Configuration|user!>/Xbb/
Wdir: /shome/<!Configuration|user!>/Hbb/Xbb/


;for MC
;samplepath = dcap://t3se01.psi.ch:22125/pnfs/psi.ch/cms/trivcat///store/t3groups/ethz-higgs/run2/VHBBHeppyV20/
;for Data
samplepath = dcap://t3se01.psi.ch:22125/pnfs/psi.ch/cms/trivcat///store/t3groups/ethz-higgs/run2/VHBBHeppyV20/BTagCSV/
;samplepath = dcap://t3se01.psi.ch:22125/pnfs/psi.ch/cms/trivcat///store/t3groups/ethz-higgs/run2/VHBBHeppyV20/BTag/


#!! The directory with the code
vhbbpath= <!Directories|Wdir!>/Xbb
#!! specifies the .cfg files with the Samples information
samplesinfo: /shome/nchernya/Hbb/Xbb/Xbb/python/GaelZllHbb13TeVconfig/samples_nosplit.ini
#!! where you want to store the logfiles from job submissions
logpath: /shome/nchernya/Hbb/Xbb//Xbb/python/logs_v20//test/Logs/


;!! from which samples to plot and where to save the plots
;plottingSamples: <!Directories|PREPout!>
;plottingSamples: <!Directories|MVAout!>
plottingSamples: <!Directories|SYSout!>
plotpath: /shome/nchernya/Hbb/Xbb//Xbb/python/logs_v20//test/Plots/


#!! basedir for tagged folder structure

tagDir: <!Directories|vhbbpath!>/python/<!Directories|Dname!>/

#!! cached files
;tmpSamples = <!Directories|PREPout!>/skimsZllHbb/
;tmpSamples = root://t3dcachedb03.psi.ch:1094//pnfs/psi.ch/cms/trivcat/store/user/gaperrin/VHbb/ZllHbb13TeV_V13/prep_subtypes
;tmpSamples = root://t3dcachedb03.psi.ch:1094//pnfs/psi.ch/cms/trivcat/store/user/gaperrin/VHbb/ZllHbb13TeV_V14/prep_subtypes_2
;tmpSamples = root://t3dcachedb03.psi.ch:1094//pnfs/psi.ch/cms/trivcat/store/user/gaperrin/VHbb/ZllHbb13TeV_V14/tmp
tmpSamples = root://t3dcachedb03.psi.ch:1094//pnfs/psi.ch/cms/trivcat/store/user/nchernya/Hbb/VBFHbb13TeV_v20/tmp

sampleName = WW_pythia8

#!! from which samples to make the DCs and where to save the DCs
dcSamples: <!Directories|MVAout!>/
;dcSamples: <!Directories|PREPout!>/
limits: /shome/nchernya/Hbb/Xbb//Xbb/python/logs_v20//test/Limits/

t3userfolder = root://t3dcachedb03.psi.ch:1094//pnfs/psi.ch/cms/trivcat/store/user/<!Configuration|user!>

;#!! From where to take the raw samples and where to put the prepared trees:
PREPin: <!Directories|samplepath!>
PREPout: root://t3dcachedb03.psi.ch:1094//pnfs/psi.ch/cms/trivcat/store/user/nchernya/Hbb/VBFHbb13TeV_v20/prep
;PREPout: root://t3dcachedb03.psi.ch:1094//pnfs/psi.ch/cms/trivcat/store/user/gaperrin/VHbb/ZllHbb13TeV_V20/prep_TestMergedCode
;PREPout: root://t3dcachedb03.psi.ch:1094//pnfs/psi.ch/cms/trivcat/store/user/gaperrin/VHbb/ZllHbb13TeV_V20/prep_v3HT0to100
;PREPout: root://t3dcachedb03.psi.ch:1094//pnfs/psi.ch/cms/trivcat/store/user/gaperrin/VHbb/ZllHbb13TeV_V20/prep_v4


#!! On which samples to apply the regression and write the sys and where to write the resulting trees:
SYSin: <!Directories|PREPout!>/
;SYSout: root://t3dcachedb03.psi.ch:1094//pnfs/psi.ch/cms/trivcat/store/user/gaperrin/VHbb/ZllHbb13TeV_V14/sys_v2/
;SYSout: root://t3dcachedb03.psi.ch:1094//pnfs/psi.ch/cms/trivcat/store/user/gaperrin/VHbb/ZllHbb13TeV_V14/sys_v3/
;SYSout: root://t3dcachedb03.psi.ch:1094//pnfs/psi.ch/cms/trivcat/store/user/gaperrin/VHbb/ZllHbb13TeV_V14/sys_v4/
SYSout: root://t3dcachedb03.psi.ch:1094//pnfs/psi.ch/cms/trivcat/store/user/nchernya/Hbb/VBFHbb13TeV_v20/tmp/
;sysout from Luca
;SYSout: root://t3dcachedb03.psi.ch:1094//pnfs/psi.ch/cms/trivcat/store/user/perrozzi/VHbb/ZllHbb13TeV_V14/syst/


#!! On which samples to evaluate the MVA on and where to write the resulting trees:
;MVAin: root://t3dcachedb03.psi.ch:1094//pnfs/psi.ch/cms/trivcat/store/user/perrozzi/VHbb/ZllHbb13TeV_V14/sys/
MVAin: <!Directories|SYSout!>
;MVAout: <!Directories|t3userfolder!>/VHbb/ZllHbb13TeV_V14/mva_PtIsoCut/
MVAout: <!Directories|t3userfolder!>/Hbb/Xbb/logs/
;
;Luca
;MVAout: root://t3dcachedb03.psi.ch:1094//pnfs/psi.ch/cms/trivcat/store/user/perrozzi/VHbb/ZllHbb13TeV_V14/mva/



#!! to fix corruption problem use scratch
#MVAout: <!Directories|scratch!>/

#!! On which samples to evaluate the MVAon and where to write the resulting trees:
#SPLITin: <!Directories|samplepath!>/env/sys/
#SPLITout: <!Directories|SYSout!>/split/
#!! -------------------------
#!! GENERAL CONFIGURATION
#!! -------------------------

[General]

#Set as the lumi of each sample. What is the effect of this ? Doesn't seem to change anything for the ploting
; lumi = 1

#Set to True or False to display debug messages
Debug: True

[Analysis]
tag = 13TeV

# BDT to discriminate Signal and Background
#!! If this Flag is used then 50% of MC samples will go in training and the rest will be scaled up by a factor of 2.
#!! if you train on 50% but then set it to 'False' while writing DC, then you get your biased training samples in the limit!!!
#!! be sure to have this right !!!
;#When computing SF from CR, set this flag to false
;if one wants to use Mjj -> put to False
;Rescale MC by factor 2 if true
;TrainFlag = True
TrainFlag = False

;!! -------------------------
;!! REGRESSION
;!! -------------------------
[Regression]
writeNewVariables={}
;writeNewVariables = {
;    'CSV3':'Max$(Jet_btagCSV[aJCidx])',\
;    'naddGoodLeptons5':'Sum$(aLeptons_pt>5 && (aLeptons_jetBTagCSV<0.25 || aLeptons_relIso03<0.4 || aLeptons_looseIdSusy!=0 ||  aLeptons_jetDR>0.3 ))+Sum$(vLeptons_pt>5 && (vLeptons_jetBTagCSV<0.25 || vLeptons_relIso03<0.4 || vLeptons_looseIdSusy!=0 ||  vLeptons_jetDR>0.3 ))',\
;    'naddGoodLeptons7':'Sum$(aLeptons_pt>7 && (aLeptons_jetBTagCSV<0.25 || aLeptons_relIso03<0.4 || aLeptons_looseIdSusy!=0 ||  aLeptons_jetDR>0.3 ))+Sum$(vLeptons_pt>7 && (vLeptons_jetBTagCSV<0.25 || vLeptons_relIso03<0.4 || vLeptons_looseIdSusy!=0 ||  vLeptons_jetDR>0.3 ))',\
;    'naddGoodLeptons10':'Sum$(aLeptons_pt>10 && (aLeptons_jetBTagCSV<0.25 || aLeptons_relIso03<0.4 || aLeptons_looseIdSusy!=0 ||  aLeptons_jetDR>0.3 ))+Sum$(vLeptons_pt>10 && (vLeptons_jetBTagCSV<0.25 || vLeptons_relIso03<0.4 || vLeptons_looseIdSusy!=0 ||  vLeptons_jetDR>0.3 ))',\
;    'naddGoodLeptons15':'Sum$(aLeptons_pt>15 && (aLeptons_jetBTagCSV<0.25 || aLeptons_relIso03<0.4 || aLeptons_looseIdSusy!=0 ||  aLeptons_jetDR>0.3 ))+Sum$(vLeptons_pt>15 && (vLeptons_jetBTagCSV<0.25 || vLeptons_relIso03<0.4 || vLeptons_looseIdSusy!=0 ||  vLeptons_jetDR>0.3 ))',\
;    'naddGoodLeptons20':'Sum$(aLeptons_pt>20 && (aLeptons_jetBTagCSV<0.25 || aLeptons_relIso03<0.4 || aLeptons_looseIdSusy!=0 ||  aLeptons_jetDR>0.3 ))+Sum$(vLeptons_pt>20 && (vLeptons_jetBTagCSV<0.25 || vLeptons_relIso03<0.4 || vLeptons_looseIdSusy!=0 ||  vLeptons_jetDR>0.3 ))',\
;    'addLepton5':'Sum$(aLeptons_pt>5&&abs(aLeptons_eta)<2.5)+Sum$(vLeptons_pt>5&&abs(vLeptons_eta)<2.5)',\
;    'addLepton10':'Sum$(aLeptons_pt>10&&abs(aLeptons_eta)<2.5)+Sum$(vLeptons_pt>10&&abs(vLeptons_eta)<2.5)',\
;    'addLepton20':'Sum$(aLeptons_pt>20&&abs(aLeptons_eta)<2.5)+Sum$(vLeptons_pt>20&&abs(vLeptons_eta)<2.5)',\
;    'addLepton30':'Sum$(aLeptons_pt>30&&abs(aLeptons_eta)<2.5)+Sum$(vLeptons_pt>30&&abs(vLeptons_eta)<2.5)',\
;    'addJet20':'Sum$(Jet_pt[aJCidx]>20. && abs(Jet_eta[aJCidx])<2.5)',\
;    'addJetNoPU20':'Sum$(Jet_pt[aJCidx]>20. && abs(Jet_eta[aJCidx])<2.5 && Jet_puId[aJCidx]>0)',\
;    'addCenJet20':'Sum$(Jet_pt[aJCidx]>20. && abs(Jet_eta[aJCidx])<2.4)',\
;    'addCenJetNoPU20':'Sum$(Jet_pt[aJCidx]>20. && abs(Jet_eta[aJCidx])<2.4 && Jet_puId[aJCidx]>0)',\
;    'addJet30':'Sum$(Jet_pt[aJCidx]>30.)',\
;    'addJetNoPU30':'Sum$(Jet_pt[aJCidx]>30. && Jet_puId[aJCidx]>0)',\
;    'addCenJet30':'Sum$(Jet_pt[aJCidx]>30. && abs(Jet_eta[aJCidx])<2.4)',\
;    'addCenJetNoPU30':'Sum$(Jet_pt[aJCidx]>30. && abs(Jet_eta[aJCidx])<2.4 && Jet_puId[aJCidx]>0)',\
;    'addJet40':'Sum$(Jet_pt[aJCidx]>40.)',\
;    'addJetNoPU40':'Sum$(Jet_pt[aJCidx]>40. && Jet_puId[aJCidx]>0)',\
;    'addCenJet40':'Sum$(Jet_pt[aJCidx]>40. && abs(Jet_eta[aJCidx])<2.4)',\
;    'addCenJetNoPU40':'Sum$(Jet_pt[aJCidx]>40. && abs(Jet_eta[aJCidx])<2.4 && Jet_puId[aJCidx]>0)',\
;    'pt_1':'max(Jet_pt[hJCidx[0]],Jet_pt[hJCidx[1]])',\
;    'pt_2':'min(Jet_pt[hJCidx[0]],Jet_pt[hJCidx[1]])',\
;    'addJet40':'Sum$(Jet_pt[aJCidx]>40.)',\
;    'minDeltaPhiJet1Met':'MinIf$(abs(TVector2::Phi_mpi_pi(Jet_phi-met_phi)),Iteration$<1)',\
;    'minDeltaPhiJet2Met':'MinIf$(abs(TVector2::Phi_mpi_pi(Jet_phi-met_phi)),Iteration$<2)',\
;    'minDeltaPhiJet3Met':'MinIf$(abs(TVector2::Phi_mpi_pi(Jet_phi-met_phi)),Iteration$<3)',\
;    'minDeltaPhiJet4Met':'MinIf$(abs(TVector2::Phi_mpi_pi(Jet_phi-met_phi)),Iteration$<4)',\
;    'minDeltaPhiCenJetNoPU20Met':'MinIf$(abs(TVector2::Phi_mpi_pi(Jet_phi-met_phi)),Jet_pt>20 && Jet_eta<2.5 && Jet_puId)',\
;    'minDeltaPhiCenJetNoPU30Met':'MinIf$(abs(TVector2::Phi_mpi_pi(Jet_phi-met_phi)),Jet_pt>30 && Jet_eta<2.5 && Jet_puId)',\
;    'minDeltaPhiCenJetNoPU30Met':'MinIf$(abs(TVector2::Phi_mpi_pi(Jet_phi-met_phi)),Jet_pt>30 && Jet_puId)',\
;    'minDeltaPhiCenJetNoPU30Met':'MinIf$(abs(TVector2::Phi_mpi_pi(Jet_phi-met_phi)),Jet_pt>30 && Jet_eta<2.5 )',\
;    'minDeltaPhiCenJetNoPU30Met':'MinIf$(abs(TVector2::Phi_mpi_pi(Jet_phi-met_phi)),Jet_pt>30 )',\
;    'minDeltaPhiCenJetNoPU40Met':'MinIf$(abs(TVector2::Phi_mpi_pi(Jet_phi-met_phi)),Jet_pt>40 && Jet_eta<2.5 && Jet_puId)',\
;    'minDeltaPhiCenJetNoPU50Met':'MinIf$(abs(TVector2::Phi_mpi_pi(Jet_phi-met_phi)),Jet_pt>50 && Jet_eta<2.5 && Jet_puId)',\
;    'minDeltaPhiCenJetNoPU60Met':'MinIf$(abs(TVector2::Phi_mpi_pi(Jet_phi-met_phi)),Jet_pt>60 && Jet_eta<2.5 && Jet_puId)',\
;    'minDeltaPhiCenJetNoPU70Met':'MinIf$(abs(TVector2::Phi_mpi_pi(Jet_phi-met_phi)),Jet_pt>70 && Jet_eta<2.5 && Jet_puId)',\
;    'minDeltaPhiCenJetNoPU80Met':'MinIf$(abs(TVector2::Phi_mpi_pi(Jet_phi-met_phi)),Jet_pt>80 && Jet_eta<2.5 && Jet_puId)',\
;    'minDeltaPhiJetNoPU80Met':'MinIf$(abs(TVector2::Phi_mpi_pi(Jet_phi-met_phi)),Jet_pt>80 && Jet_puId)',\
;    'minDeltaPhiCenJet80Met':'MinIf$(abs(TVector2::Phi_mpi_pi(Jet_phi-met_phi)),Jet_pt>80 && Jet_eta<2.5 )',\
;    'minDeltaPhiJet80Met':'MinIf$(abs(TVector2::Phi_mpi_pi(Jet_phi-met_phi)),Jet_pt>80 )',\
;    'minDeltaPhiJet90Met':'MinIf$(abs(TVector2::Phi_mpi_pi(Jet_phi-met_phi)),Jet_pt>90 )',\
;    'minDeltaPhiJet100Met':'MinIf$(abs(TVector2::Phi_mpi_pi(Jet_phi-met_phi)),Jet_pt>100)',\
;    'metmetType1p2_sig':'metType1p2_pt/sqrt(met_sumEt)',\
;    'metPuppi_sig':'metPuppi_pt/sqrt(met_sumEt)',\
;    'met_sig':'met_pt/sqrt(met_sumEt)',\
;    'met_sig':'met_pt/sqrt(met_sumEt)',\
;    'DeltaPhiJet1Jet2':'abs(TVector2::Phi_mpi_pi(Jet_phi[0]-Jet_phi[1]))',\
;    'DeltaPhiHMET':'abs(TVector2::Phi_mpi_pi(H_phi-met_phi))',\
;    'DeltaPhiHCSVMET':'abs(TVector2::Phi_mpi_pi(HCSV_phi-met_phi))'}

;regWeight = weights/MVA_BDT_REG_ZllHbbRegression_ZZTo2Q2Nu.weights.xml
;regWeight = weights/MVA_BDT_REG_ZllHbbRegression_ZH.weights.xml
regWeight = weights/MVA_BDT_REG_ZllHbbRegression_ZH_HToBB_ZToLL_M125_pow.weights.xml

; ##regVars## must be compatible with [TrainRegression] -> Vars
regVars = ['Alt$(Jet_pt[hJCidx],0)', 'Alt$(Jet_rawPt[hJCidx],0)', 'Alt$(rho[hJCidx],0)', 'Alt$(Jet_eta[hJCidx],0)', 'VHbb::evalMtFromPtEtaPhiM(Alt$(Jet_pt[hJCidx],0),Alt$(Jet_eta[hJCidx],0),Alt$(Jet_phi[hJCidx],0),Alt$(Jet_mass[hJCidx],0))', 'Alt$(Jet_leadTrackPt[hJCidx],0)', 'max(Alt$(Jet_leptonPtRel[hJCidx],0),0)', 'max(Alt$(Jet_leptonPt[hJCidx],0),0)', 'max(Alt$(Jet_leptonDeltaR[hJCidx],0),0)', 'Alt$(Jet_chEmEF[hJCidx],0)', 'Alt$(Jet_neEmEF[hJCidx],0)', 'Alt$(Jet_chHEF[hJCidx],0)','Alt$(Jet_neHEF[hJCidx],0)', 'Alt$(Jet_chMult[hJCidx],0)', 'Alt$(Jet_vtxNtracks[hJCidx],0)', 'Alt$(Jet_vtxPt[hJCidx],0)', 'Alt$(Jet_vtxMass[hJCidx],0)', 'max(Alt$(Jet_vtx3DVal[hJCidx],0),0)', 'Alt$(Jet_vtx3DSig[hJCidx],0)']

; ##regDict## must contain exactly all ##regVars##
; it is a dictionary between Jet_vtxPt[hJCidx]:Jet_vtxPt[hJCidx[0]]
regDict = {'Alt$(Jet_pt[hJCidx],0)': 'Alt$(Jet_pt[hJCidx[0]] ,0)', 'Alt$(Jet_rawPt[hJCidx],0)': 'Alt$(Jet_rawPt[hJCidx[0]] ,0)', 'Alt$(rho[hJCidx],0)': 'Alt$(rho[hJCidx[0]] ,0)', 'Alt$(Jet_eta[hJCidx],0)': 'Alt$(Jet_eta[hJCidx[0]] ,0)', 'VHbb::evalMtFromPtEtaPhiM(Alt$(Jet_pt[hJCidx],0),Alt$(Jet_eta[hJCidx],0),Alt$(Jet_phi[hJCidx],0),Alt$(Jet_mass[hJCidx],0))': 'VHbb::evalMtFromPtEtaPhiM(Alt$(Jet_pt[hJCidx[0]] ,0),Alt$(Jet_eta[hJCidx[0]] ,0),Alt$(Jet_phi[hJCidx[0]] ,0),Alt$(Jet_mass[hJCidx[0]] ,0))', 'Alt$(Jet_vtxMass[hJCidx],0)': 'Alt$(Jet_vtxMass[hJCidx[0]] ,0)', 'Alt$(Jet_leadTrackPt[hJCidx],0)': 'Alt$(Jet_leadTrackPt[hJCidx[0]] ,0)', 'Alt$(Jet_vtxNtracks[hJCidx],0)': 'Alt$(Jet_vtxNtracks[hJCidx[0]] ,0)', 'Alt$(Jet_vtxPt[hJCidx],0)': 'Alt$(Jet_vtxPt[hJCidx[0]] ,0)', 'max(Alt$(Jet_vtx3DVal[hJCidx],0),0)': 'max(Alt$(Jet_vtx3DVal[hJCidx[0]],0),0)', 'Alt$(Jet_vtx3DSig[hJCidx],0)': 'Alt$(Jet_vtx3DSig[hJCidx[0]] ,0)', 'Alt$(Jet_neEmEF[hJCidx],0)': 'Alt$(Jet_neEmEF[hJCidx[0]] ,0)', 'max(Alt$(Jet_leptonPtRel[hJCidx],0),0)': 'max(Alt$(Jet_leptonPtRel[hJCidx[0]] ,0),0)', 'max(Alt$(Jet_leptonPt[hJCidx],0),0)': 'max(Alt$(Jet_leptonPt[hJCidx[0]] ,0),0)', 'Alt$(Jet_chMult[hJCidx],0)': 'Alt$(Jet_chMult[hJCidx[0]] ,0)', 'Alt$(Jet_chEmEF[hJCidx],0)': 'Alt$(Jet_chEmEF[hJCidx[0]] ,0)', 'Alt$(Jet_chHEF[hJCidx],0)': 'Alt$(Jet_chHEF[hJCidx[0]] ,0)', 'max(Alt$(Jet_leptonDeltaR[hJCidx],0),0)': 'max(Alt$(Jet_leptonDeltaR[hJCidx[0]] ,0),0)', 'Alt$(Jet_neHEF[hJCidx],0)': 'Alt$(Jet_neHEF[hJCidx[0]] ,0)'}


;'Jet_mass[hJCidx]': 'Jet_mass[hJCidx[0]]', 'VHbb::evalEtFromPtEtaPhiM(Jet_pt[hJCidx],Jet_eta[hJCidx],Jet_phi[hJCidx],Jet_mass[hJCidx])': 'VHbb::evalEt(Jet_pt[hJCidx[0]],Jet_eta[hJCidx[0]],Jet_phi[hJCidx[0]],VHbb::GetEnergy(Jet_pt[hJCidx[0]],Jet_eta[hJCidx[0]],Jet_mass[hJCidx[0]]))', 'VHbb::evalMtFromPtEtaPhiM(Jet_pt[hJCidx],Jet_eta[hJCidx],Jet_phi[hJCidx],Jet_mass[hJCidx])': 'VHbb::evalMt(Jet_pt[hJCidx[0]],Jet_eta[hJCidx[0]],Jet_phi[hJCidx[0]],VHbb::GetEnergy(Jet_pt[hJCidx[0]],Jet_eta[hJCidx[0]],Jet_mass[hJCidx[0]]))',

regWeightFilterJets = weights/MVA_BDT_REG_MyRegression.weights.xml
regDictFilterJets = {"fathFilterJets_pt":"fathFilterJets_pt[0]","VHbb::evalJERBias(fathFilterJets_ptRaw,fathFilterJets_genPt,fathFilterJets_eta)":"VHbb::evalJERBias(fathFilterJets_ptRaw[0],fathFilterJets_genPt[0],fathFilterJets_eta[0])","rho25":"rho25","VHbb::evalEt(fathFilterJets_pt,fathFilterJets_eta,fathFilterJets_phi,fathFilterJets_e)":"VHbb::evalEt(fathFilterJets_pt[0],fathFilterJets_eta[0],fathFilterJets_phi[0],fathFilterJets_e[0])","VHbb::evalMt(fathFilterJets_pt,fathFilterJets_eta,fathFilterJets_phi,fathFilterJets_e)":"VHbb::evalMt(fathFilterJets_pt[0],fathFilterJets_eta[0],fathFilterJets_phi[0],fathFilterJets_e[0])","fathFilterJets_ptLeadTrack":"fathFilterJets_ptLeadTrack[0]","metPuppi_pt":"METet","VHbb::deltaPhi(met_phi,fathFilterJets_phi)":"VHbb::deltaPhi(met_phi,fathFilterJets_phi[0])"}
regVarsFilterJets = ["fathFilterJets_pt","VHbb::evalJERBias(fathFilterJets_ptRaw,fathFilterJets_genPt,fathFilterJets_eta)","rho25","VHbb::evalEt(fathFilterJets_pt,fathFilterJets_eta,fathFilterJets_phi,fathFilterJets_e)","VHbb::evalMt(fathFilterJets_pt,fathFilterJets_eta,fathFilterJets_phi,fathFilterJets_e)","fathFilterJets_ptLeadTrack","metPuppi_pt","VHbb::deltaPhi(met_phi,fathFilterJets_phi)"]


;regWeight = weights/MVA_BDT_REG_ZllHbbRegression_ZH.weights.xml
;regWeight = weights/MVA_BDT_REG_ZllHbbRegression_ZZTo2Q2Nu.weights.xml


#Need this for the plotting
[VHbbNameSpace]
library=<!Directories|vhbbpath!>/interface/VHbbNameSpace_h.so
[BTagReshaping]
library=<!Directories|vhbbpath!>/interface/BTagReshaping_h.so
[BTagHFweights]
;file=<!Directories|vhbbpath!>/python/weights/csv_rwt_hf_IT_FlatSF_2015_07_27.root
;file=<!Directories|vhbbpath!>/python/weights/csv_rwt_fit_hf_2016_01_28.root
file=<!Directories|vhbbpath!>/python/weights/csv_rwt_fit_hf_76x_2016_02_08.root
[BTagLFweights]
;file=<!Directories|vhbbpath!>/python/weights/csv_rwt_lf_IT_FlatSF_2015_07_27.root
;file=<!Directories|vhbbpath!>/python/weights/csv_rwt_fit_lf_2016_01_28.root
file=<!Directories|vhbbpath!>/python/weights/csv_rwt_fit_lf_76x_2016_02_08.root

;;!! for the likelihood
[AngularLike]
backgrounds = ['Zbb','Zudsg','ttbar','ZZ']
yields = {'Zbb':584.8,'Zudsg':881.61,'ttbar':135.7,'ZZ':44.04,'Sig':5.13}

;!! --------------------------
;!! SYSTEMATICS
;!! --------------------------
;Note: it seems that the shape sys are hardcode in evaluateMVA. The lines below don't seem to have any effect for the moment
[systematics]
systematics: Nominal JER_up JER_down JES_up JES_down beff_up beff_down bmis_up bmis_down beff1_up beff1_down
;TEST
;systematics: Nominal HVmass_up HVmass_down

;!! --------------------------------------------------
;!! Varibles definition for trainging and evaluation
;!! --------------------------------------------------

;##TODO##  addCenJetNoPU30_JER/JES_up/down
;[ZllBDTVars]
;nominal: HCSV_reg_mass HCSV_reg_pt hvdphi metpuppi_pt Etabbreg hjet_btagcsv[0] hjet_btagcsv[1] addcenjetnopu30 h.dr max(hjet_pt[0],hjet_pt[1]) min(hjet_pt[0],hjet_pt[1]) naddgoodleptons5 max$(jet_btagcsv[ajcidx])
;
;jer_up: h_jer.mass_up h_jer.pt_up hvdphi metpuppi_pt h.deta hjet_btagcsv[0] hjet_btagcsv[1] addcenjetnopu30 h.dr max(hjet_pt_jer_up[0],hjet_pt_jer_up[1]) min(hjet_pt_jer_up[0],hjet_pt_jer_up[1]) naddgoodleptons5 max$(jet_btagcsv[ajcidx])
;jer_down: h_jer.mass_down h_jer.pt_down hvdphi metpuppi_pt h.deta hjet_btagcsv[0] hjet_btagcsv[1] addcenjetnopu30 h.dr  max(hjet_pt_jer_down[0],hjet_pt_jer_down[1]) min(hjet_pt_jer_down[0],hjet_pt_jer_down[1]) naddgoodleptons5 max$(jet_btagcsv[ajcidx])
;
;jes_up: h_jes.mass_up h_jes.pt_up hvdphi metpuppi_pt h.deta hjet_btagcsv[0] hjet_btagcsv[1] addcenjetnopu30 h.dr max(hjet_pt_jes_up[0],hjet_pt_jes_up[1]) min(hjet_pt_jes_up[0],hjet_pt_jes_up[1]) naddgoodleptons5 max$(jet_btagcsv[ajcidx])
;jes_down: h_jes.mass_down h_jes.pt_down hvdphi metpuppi_pt h.deta hjet_btagcsv[0] hjet_btagcsv[1] addcenjetnopu30 h.dr max(hjet_pt_jes_down[0],hjet_pt_jes_down[1]) min(hjet_pt_jes_down[0],hjet_pt_jes_down[1]) naddgoodleptons5 max$(jet_btagcsv[ajcidx])
;
;beff_up: h_jes.mass_down h_jes.pt_down hvdphi metpuppi_pt h.deta hjet_btagcsvup[0] hjet_btagcsvup[1] addcenjetnopu30 h.dr max(hjet_pt[0],hjet_pt[1]) min(hjet_pt[0],hjet_pt[1]) naddgoodleptons5 max$(jet_btagcsv[ajcidx])
;
;beff_down: h_jes.mass_down h_jes.pt_down hvdphi metpuppi_pt h.deta hjet_btagcsvdown[0] hjet_btagcsvdown[1] addcenjetnopu30 h.dr max(hjet_pt[0],hjet_pt[1]) min(hjet_pt[0],hjet_pt[1]) naddgoodleptons5 max$(jet_btagcsv[ajcidx])
;
;bmis_up: h_jes.mass_down h_jes.pt_down hvdphi metpuppi_pt h.deta hjet_btagcsvfup[0] hjet_btagcsvfup[1] addcenjetnopu30 h.dr max(hjet_pt[0],hjet_pt[1]) min(hjet_pt[0],hjet_pt[1]) naddgoodleptons5 max$(jet_btagcsv[ajcidx])
;bmis_down: h_jes.mass_down h_jes.pt_down hvdphi metpuppi_pt h.deta hjet_btagcsvfdown[0] hjet_btagcsvfdown[1] addcenjetnopu30 h.dr max(hjet_pt[0],hjet_pt[1]) min(hjet_pt[0],hjet_pt[1]) naddgoodleptons5 max$(jet_btagcsv[ajcidx])

[ZllBDTVars]
Nominal: H.mass H.pt HVdPhi metPuppi_pt H.dEta hJet_btagCSV[0] hJet_btagCSV[1] addCenJetNoPU30 H.dR max(hJet_pt[0],hJet_pt[1]) min(hJet_pt[0],hJet_pt[1]) naddGoodLeptons5 Max$(Jet_btagCSV[aJCidx])

JER_up: H_JER.mass_up H_JER.pt_up HVdPhi metPuppi_pt H.dEta hJet_btagCSV[0] hJet_btagCSV[1] addCenJetNoPU30 H.dR max(hJet_pt_JER_up[0],hJet_pt_JER_up[1]) min(hJet_pt_JER_up[0],hJet_pt_JER_up[1]) naddGoodLeptons5 Max$(Jet_btagCSV[aJCidx])
JER_down: H_JER.mass_down H_JER.pt_down HVdPhi metPuppi_pt H.dEta hJet_btagCSV[0] hJet_btagCSV[1] addCenJetNoPU30 H.dR  max(hJet_pt_JER_down[0],hJet_pt_JER_down[1]) min(hJet_pt_JER_down[0],hJet_pt_JER_down[1]) naddGoodLeptons5 Max$(Jet_btagCSV[aJCidx])

JES_up: H_JES.mass_up H_JES.pt_up HVdPhi metPuppi_pt H.dEta hJet_btagCSV[0] hJet_btagCSV[1] addCenJetNoPU30 H.dR max(hJet_pt_JES_up[0],hJet_pt_JES_up[1]) min(hJet_pt_JES_up[0],hJet_pt_JES_up[1]) naddGoodLeptons5 Max$(Jet_btagCSV[aJCidx])
JES_down: H_JES.mass_down H_JES.pt_down HVdPhi metPuppi_pt H.dEta hJet_btagCSV[0] hJet_btagCSV[1] addCenJetNoPU30 H.dR max(hJet_pt_JES_down[0],hJet_pt_JES_down[1]) min(hJet_pt_JES_down[0],hJet_pt_JES_down[1]) naddGoodLeptons5 Max$(Jet_btagCSV[aJCidx])

beff_up: H_JES.mass_down H_JES.pt_down HVdPhi metPuppi_pt H.dEta hJet_btagCSVUp[0] hJet_btagCSVUp[1] addCenJetNoPU30 H.dR max(hJet_pt[0],hJet_pt[1]) min(hJet_pt[0],hJet_pt[1]) naddGoodLeptons5 Max$(Jet_btagCSV[aJCidx])

beff_down: H_JES.mass_down H_JES.pt_down HVdPhi metPuppi_pt H.dEta hJet_btagCSVDown[0] hJet_btagCSVDown[1] addCenJetNoPU30 H.dR max(hJet_pt[0],hJet_pt[1]) min(hJet_pt[0],hJet_pt[1]) naddGoodLeptons5 Max$(Jet_btagCSV[aJCidx])
bmis_up: H_JES.mass_down H_JES.pt_down HVdPhi metPuppi_pt H.dEta hJet_btagCSVFUp[0] hJet_btagCSVFUp[1] addCenJetNoPU30 H.dR max(hJet_pt[0],hJet_pt[1]) min(hJet_pt[0],hJet_pt[1]) naddGoodLeptons5 Max$(Jet_btagCSV[aJCidx])
bmis_down: H_JES.mass_down H_JES.pt_down HVdPhi metPuppi_pt H.dEta hJet_btagCSVFDown[0] hJet_btagCSVFDown[1] addCenJetNoPU30 H.dR max(hJet_pt[0],hJet_pt[1]) min(hJet_pt[0],hJet_pt[1]) naddGoodLeptons5 Max$(Jet_btagCSV[aJCidx])

;###FIXME###  beff1 is identical to bmis
beff1_up: H_JES.mass_down H_JES.pt_down HVdPhi metPuppi_pt H.dEta hJet_btagCSVFUp[0] hJet_btagCSVFUp[1] addCenJetNoPU30 H.dR max(hJet_pt[0],hJet_pt[1]) min(hJet_pt[0],hJet_pt[1]) naddGoodLeptons5 Max$(Jet_btagCSV[aJCidx])
beff1_down: H_JES.mass_down H_JES.pt_down HVdPhi metPuppi_pt H.dEta hJet_btagCSVFDown[0] hJet_btagCSVFDown[1] addCenJetNoPU30 H.dR max(hJet_pt[0],hJet_pt[1]) min(hJet_pt[0],hJet_pt[1]) naddGoodLeptons5 Max$(Jet_btagCSV[aJCidx])

[ZllBDTVarsNoMjj]
Nominal: H.pt HVdPhi metPuppi_pt hJet_btagCSV[0] hJet_btagCSV[1] addJetNoPU20-Sum$(isrJetVH>=0)-(nhjidxaddJetsdR08-2) max(hJet_pt[0],hJet_pt[1]) min(hJet_pt[0],hJet_pt[1]) naddGoodLeptons5 Max$(Jet_btagCSV[aJCidx])

JER_up: H_JER.pt_up HVdPhi metPuppi_pt hJet_btagCSV[0] hJet_btagCSV[1] addJetNoPU20-Sum$(isrJetVH>=0)-(nhjidxaddJetsdR08-2) max(hJet_pt_JER_up[0],hJet_pt_JER_up[1]) min(hJet_pt_JER_up[0],hJet_pt_JER_up[1]) naddGoodLeptons5 Max$(Jet_btagCSV[aJCidx])
JER_down: H_JER.pt_down HVdPhi metPuppi_pt hJet_btagCSV[0] hJet_btagCSV[1] addJetNoPU20-Sum$(isrJetVH>=0)-(nhjidxaddJetsdR08-2) max(hJet_pt_JER_down[0],hJet_pt_JER_down[1]) min(hJet_pt_JER_down[0],hJet_pt_JER_down[1]) naddGoodLeptons5 Max$(Jet_btagCSV[aJCidx])

JES_up: H_JES.pt_up HVdPhi metPuppi_pt hJet_btagCSV[0] hJet_btagCSV[1] addJetNoPU20-Sum$(isrJetVH>=0)-(nhjidxaddJetsdR08-2) max(hJet_pt_JES_up[0],hJet_pt_JES_up[1]) min(hJet_pt_JES_up[0],hJet_pt_JES_up[1]) naddGoodLeptons5 Max$(Jet_btagCSV[aJCidx])
JES_down: H_JES.pt_down HVdPhi metPuppi_pt hJet_btagCSV[0] hJet_btagCSV[1] addJetNoPU20-Sum$(isrJetVH>=0)-(nhjidxaddJetsdR08-2) max(hJet_pt_JES_down[0],hJet_pt_JES_down[1]) min(hJet_pt_JES_down[0],hJet_pt_JES_down[1]) naddGoodLeptons5 Max$(Jet_btagCSV[aJCidx])

beff_up: H_JES.pt_down HVdPhi metPuppi_pt hJet_btagCSVUp[0] hJet_btagCSVUp[1] addJetNoPU20-Sum$(isrJetVH>=0)-(nhjidxaddJetsdR08-2) max(hJet_pt[0],hJet_pt[1]) min(hJet_pt[0],hJet_pt[1]) naddGoodLeptons5 Max$(Jet_btagCSV[aJCidx])
beff_down: H_JES.pt_down HVdPhi metPuppi_pt hJet_btagCSVDown[0] hJet_btagCSVDown[1] addJetNoPU20-Sum$(isrJetVH>=0)-(nhjidxaddJetsdR08-2) max(hJet_pt[0],hJet_pt[1]) min(hJet_pt[0],hJet_pt[1]) naddGoodLeptons5 Max$(Jet_btagCSV[aJCidx])

bmis_up: H_JES.pt_down HVdPhi metPuppi_pt hJet_btagCSVFUp[0] hJet_btagCSVFUp[1] addJetNoPU20-Sum$(isrJetVH>=0)-(nhjidxaddJetsdR08-2) max(hJet_pt[0],hJet_pt[1]) min(hJet_pt[0],hJet_pt[1]) naddGoodLeptons5 Max$(Jet_btagCSV[aJCidx])
bmis_down: H_JES.pt_down HVdPhi metPuppi_pt hJet_btagCSVFDown[0] hJet_btagCSVFDown[1] addJetNoPU20-Sum$(isrJetVH>=0)-(nhjidxaddJetsdR08-2) max(hJet_pt[0],hJet_pt[1]) min(hJet_pt[0],hJet_pt[1]) naddGoodLeptons5 Max$(Jet_btagCSV[aJCidx])

;###FIXME###  beff1 is identical to bmis
beff1_up: H_JES.pt_down HVdPhi metPuppi_pt hJet_btagCSVFUp[0] hJet_btagCSVFUp[1] addJetNoPU20-Sum$(isrJetVH>=0)-(nhjidxaddJetsdR08-2) max(hJet_pt[0],hJet_pt[1]) min(hJet_pt[0],hJet_pt[1]) naddGoodLeptons5 Max$(Jet_btagCSV[aJCidx])
beff1_down: H_JES.pt_down HVdPhi metPuppi_pt hJet_btagCSVFDown[0] hJet_btagCSVFDown[1] addJetNoPU20-Sum$(isrJetVH>=0)-(nhjidxaddJetsdR08-2) max(hJet_pt[0],hJet_pt[1]) min(hJet_pt[0],hJet_pt[1]) naddGoodLeptons5 Max$(Jet_btagCSV[aJCidx])

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
; other things:


[Samples]
;used for dc step
; short name : sampleName(s)
; or
; short name : subnames
; where sampleName(s) and subnames must be defined in samples_nosplit.ini

;=======
;Signals
;=======

ZH : 'ZH_HToBB_ZToLL_M125_pow'
ggZH : 'ggZH_HToBB_ZToLL_M125_pow'

Signal: <!Samples|ZH!>,<!Samples|ggZH!>

;==========
;Backgrounds
;==========

;#!!_*_*_*_*_*_
;#Drell-Yan
;#!!_*_*_*_*_*_

;inclusive sample
DYincl: 'ZJets_udscg','ZJets_1b','ZJets_2b'
;inclusive no spliting
DYinclnosplit: 'DYJets'
;HT binned
DYHT:'HT100to200ZJets_udscg','HT100to200ZJets_1b','HT100to200ZJets_2b','HT200to400ZJets_udscg','HT200to400ZJets_1b','HT200to400ZJets_2b','HT400to600ZJets_udscg','HT400to600ZJets_1b','HT400to600ZJets_2b','HT600toInfZJets_udscg','HT600toInfZJets_1b','HT600toInfZJets_2b'
;inclusive HT<100
DYinclHT0to100: 'HT0to100ZJets_udscg','HT0to100ZJets_1b','HT0to100ZJets_2b'
;inclusive HT>100
DYinclHT100toInf: 'HT100toInfZJets_udscg','HT100toInfZJets_1b','HT100toInfZJets_2b'
;stiched sample
DYinclHT: <!Samples|DYHT!>,<!Samples|DYinclHT0to100!>

;DY: <!Samples|DYinclHT100toInf!>
DY: <!Samples|DYinclHT!>
;DY: <!Samples|DYHT!>
;DY: 'ZJets_udscg','ZJets_1b','ZJets_2b'
;DY: <!Samples|DYHT!>

;DY:'ZJets_udscg','ZJets_1b','ZJets_2b','ZJets_2c'

;ZJetsMadHT100: 'ZJetsMadHT100_light','ZJetsMadHT100_c','ZJetsMadHT100_1b','ZJetsMadHT100_2b'
;ZJetsMadHT200: 'ZJetsMadHT200_light','ZJetsMadHT200_c','ZJetsMadHT200_1b','ZJetsMadHT200_2b'
;ZJetsMadHT400: 'ZJetsMadHT400_light','ZJetsMadHT400_c','ZJetsMadHT400_1b','ZJetsMadHT400_2b'
;ZJetsMadHT600: 'ZJetsMadHT600_light','ZJetsMadHT600_c','ZJetsMadHT600_1b','ZJetsMadHT600_2b'
;ZJets_light: <!Samples|ZJetsMadHT100_light!>,<!Samples|ZJetsMadHT200_light!>,<!Samples|ZJetsMadHT400_light!>,<!Samples|ZJetsMadHT600_light!>
;ZJets_c: <!Samples|ZJetsMadHT100_c!>,<!Samples|ZJetsMadHT200_c!>,<!Samples|ZJetsMadHT400_c!>,<!Samples|ZJetsMadHT600_c!>
;ZJets_1b: <!Samples|ZJetsMadHT100_1b!>,<!Samples|ZJetsMadHT200_1b!>,<!Samples|ZJetsMadHT400_1b!>,<!Samples|ZJetsMadHT600_1b!>
;ZJets_2b: <!Samples|ZJetsMadHT100_2b!>,<!Samples|ZJetsMadHT200_2b!>,<!Samples|ZJetsMadHT400_2b!>,<!Samples|ZJetsMadHT600_2b!>
;ZJets: <!Samples|ZJetsMadHT100!>,<!Samples|ZJetsMadHT200!>,<!Samples|ZJetsMadHT400!>,<!Samples|ZJetsMadHT600!>

;Single top
ST: 'ST_s', 'ST_t', 'ST_tW_top', 'ST_tW_antitop'

;TTbar
TT: 'TT_pow'

;#!!_*_*_*_*_*_
;#DiBoson
;#!!_*_*_*_*_*_

WW: 'WWpythia_udscg','WWpythia_1b','WWpythia_2b'
WZ: 'WZpythia_udscg','WZpythia_1b','WZpythia_2b'
ZZ: 'ZZpythia_udscg','ZZpythia_1b','ZZpythia_2b'


;QCD
QCDHT: 'QCD_HT1000to1500_TuneCUETP8M1','QCD_HT100to200_TuneCUETP8M1','QCD_HT1500to2000_TuneCUETP8M1','QCD_HT2000toInf_TuneCUETP8M1','QCD_HT200to300_TuneCUETP8M1','QCD_HT500to700_TuneCUETP8M1','QCD_HT700to1000_TuneCUETP8M1'

;QCD: 'QCDHT100','QCDHT200','QCDHT300','QCDHT500','QCDHT700','QCDHT1000','QCDHT1500','QCDHT2000'
QCD: <!Samples|QCDHT!>

;Other

;All background
allBKG: <!Samples|VV!>,<!Samples|DY!>,<!Samples|TT!>,<!Samples|ST!>,<!Samples|QCD!>

setup: VH,ZJets_light,ZJets_c,ZJets_1b,ZJets_2b,TT,ST,QCD
setupLog: <!Samples|setup!>

Group: {
    ; (sub)sampleName(s) : short name
    'ZH_HToBB_ZToLL_M125':'ZH',\
    'ZH_HToBB_ZToLL_M125_pow':'ZH',\
    'ggZH_HToBB_ZToLL_M125':'ggZH',\
    'ggZH_HToBB_ZToLL_M125_pow':'ggZH',\
    'ZJets_2b':'ZJets_2b','ZJets_1b':'ZJets_1b','ZJets_c':'ZJets_c','ZJets_light':'ZJets_light',\
    'ZJets':'ZJets',\
    'TT_mad':'TT','TT_pow':'TT',\
    'ST_s':'ST', 'ST_t':'ST', 'ST_tW_top':'ST', 'ST_tW_antitop':'ST',\
    'QCDHT100':'QCD','QCDHT200':'QCD','QCDHT300':'QCD','QCDHT500':'QCD','QCDHT700':'QCD','QCDHT1000':'QCD','QCDHT1500':'QCD','QCDHT2000':'QCD',\
    'WWpythia_light':'VV','WWpythia_c':'VV','WWpythia_1b':'VV','WWpythia_2b':'VV',\
    'WZpythia_light':'VV','WZpythia_c':'VV','WZpythia_1b':'VV','WZpythia_2b':'VV',\
    'ZZpythia_light':'VV','ZZpythia_c':'VV','ZZpythia_1b':'VV','ZZpythia_2b':'VV',\
    'WZJets_pythia':'VV',\
    'FakeData':'DATA','FakeData':'DATA','SingleMuon':'DATA', 'SingleElectron':'DATA', 'MuonEG':'DATA', 'MET':'DATA', 'Jet':'DATA', 'JetHT':'DATA', 'HTMHT':'DATA', 'DoubleMuon':'DATA', 'DoubleEG':'DATA'\
    }

[Weights]
;PUWeight:   VHbb::weight2( nTrueInt )
PUWeight:   puWeight
Common:     sign(genWeight)
BTagWeight: bTagWeight_new

#lhe weights. Are used to produce the histograms. See "get_histos_from_tree" in StackMaker

;V20
;weightF: <!Weights|Common!> * <!Weights|PUWeight!>
weightF: <!Weights|Common!> * <!Weights|PUWeight!> * <!Weights|BTagWeight!>

;(new) bTag weight
weightF_bTagHF_UP:          <!Weights|Common!> * <!Weights|PUWeight!> * bTagWeightHFUp_new
weightF_bTagLF_UP:          <!Weights|Common!> * <!Weights|PUWeight!> * bTagWeightLFUp_new
weightF_bTagLFStats1_UP:    <!Weights|Common!> * <!Weights|PUWeight!> * bTagWeightLFStats1Up_new
weightF_bTagLFStats2_UP:    <!Weights|Common!> * <!Weights|PUWeight!> * bTagWeightLFStats2Up_new
weightF_bTagHFStats1_UP:    <!Weights|Common!> * <!Weights|PUWeight!> * bTagWeightHFStats1Up_new
weightF_bTagHFStats2_UP:    <!Weights|Common!> * <!Weights|PUWeight!> * bTagWeightHFStats2Up_new
weightF_bTagcErr1_UP:       <!Weights|Common!> * <!Weights|PUWeight!> * bTagWeightcErr1Up_new
weightF_bTagcErr2_UP:       <!Weights|Common!> * <!Weights|PUWeight!> * bTagWeightcErr2Up_new

weightF_bTagHF_DOWN:        <!Weights|Common!> * <!Weights|PUWeight!> * bTagWeightHFDown_new
weightF_bTagLF_DOWN:        <!Weights|Common!> * <!Weights|PUWeight!> * bTagWeightLFDown_new
weightF_bTagLFStats1_DOWN:  <!Weights|Common!> * <!Weights|PUWeight!> * bTagWeightLFStats1Down_new
weightF_bTagLFStats2_DOWN:  <!Weights|Common!> * <!Weights|PUWeight!> * bTagWeightLFStats2Down_new
weightF_bTagHFStats1_DOWN:  <!Weights|Common!> * <!Weights|PUWeight!> * bTagWeightHFStats1Down_new
weightF_bTagHFStats2_DOWN:  <!Weights|Common!> * <!Weights|PUWeight!> * bTagWeightHFStats2Down_new
weightF_bTagcErr1_DOWN:     <!Weights|Common!> * <!Weights|PUWeight!> * bTagWeightcErr1Down_new
weightF_bTagcErr2_DOWN:     <!Weights|Common!> * <!Weights|PUWeight!> * bTagWeightcErr2Down_new

weightF_pileUp_UP:          <!Weights|Common!> * <!Weights|weightF_muSF!> * <!Weights|weightF_EWK!> * VHbb::weight2_up( nTrueInt )
weightF_pileUp_DOWN:        <!Weights|Common!> * <!Weights|weightF_muSF!> * <!Weights|weightF_EWK!> * VHbb::weight2_down( nTrueInt )

;; OLD Weights mentioned by Lorenzo
;weightF_bTagHF_UP: bTagWeight_HFUp*<!Weights|weightF_muSF!>*sign(genWeight)*VHbb::weight2(nTrueInt)
;weightF_bTagHF_DOWN: bTagWeight_HFDown*<!Weights|weightF_muSF!>*sign(genWeight)*VHbb::weight2(nTrueInt)
;weightF_bTagLF_UP: bTagWeight_LFUp*<!Weights|weightF_muSF!>*sign(genWeight)*VHbb::weight2(nTrueInt)
;weightF_bTagLF_DOWN: bTagWeight_LFDown*<!Weights|weightF_muSF!>*sign(genWeight)*VHbb::weight2(nTrueInt)
;weightF_bTagStats1_UP: bTagWeight_Stats1Up*<!Weights|weightF_muSF!>*sign(genWeight)*VHbb::weight2(nTrueInt)
;weightF_bTagStats1_DOWN: bTagWeight_Stats1Down*<!Weights|weightF_muSF!>*sign(genWeight)*VHbb::weight2(nTrueInt)
;weightF_bTagStats2_UP: bTagWeight_Stats2Up*<!Weights|weightF_muSF!>*sign(genWeight)*VHbb::weight2(nTrueInt)
;weightF_bTagStats2_DOWN: bTagWeight_Stats2Down*<!Weights|weightF_muSF!>*sign(genWeight)*VHbb::weight2(nTrueInt)
;weightF_bTagcErr1_UP: bTagWeight_cErr1Up*<!Weights|weightF_muSF!>*sign(genWeight)*VHbb::weight2(nTrueInt)
;weightF_bTagcErr1_DOWN: bTagWeight_cErr1Down*<!Weights|weightF_muSF!>*sign(genWeight)*VHbb::weight2(nTrueInt)
;weightF_bTagcErr2_UP: bTagWeight_cErr2Up*<!Weights|weightF_muSF!>*sign(genWeight)*VHbb::weight2(nTrueInt)
;weightF_bTagcErr2_DOWN: bTagWeight_cErr2Down*<!Weights|weightF_muSF!>*sign(genWeight)*VHbb::weight2(nTrueInt)
;puWeight_UP: <!Weights|weightF_muSF!>*sign(genWeight)*VHbb::weight2_up(nTrueInt)
;puWeight_DOWN: <!Weights|weightF_muSF!>*sign(genWeight)*VHbb::weight2_down(nTrueInt)

weightF_muSFtrigg: (vLeptons_Eff_HLT[0]*vLeptons_SF_HLT[0]*(1-vLeptons_Eff_HLT[1])*vLeptons_SF_HLT[1] + vLeptons_Eff_HLT[1]*vLeptons_SF_HLT[1]*(1-vLeptons_Eff_HLT[0])*vLeptons_SF_HLT[0] + vLeptons_Eff_HLT[0]*vLeptons_SF_HLT[0]*vLeptons_Eff_HLT[1]*vLeptons_SF_HLT[1])/(vLeptons_Eff_HLT[0]*(1-vLeptons_Eff_HLT[1]) + vLeptons_Eff_HLT[1]*(1-vLeptons_Eff_HLT[0]) + vLeptons_Eff_HLT[0]*vLeptons_Eff_HLT[1])
weightF_muSFiso: vLeptons_SF_IsoLoose[0]*vLeptons_SF_IsoLoose[1]
weightF_muSFid: vLeptons_SF_IdLoose[0]*vLeptons_SF_IdLoose[1]
weightF_muSF: <!Weights|weightF_muSFiso!>*<!Weights|weightF_muSFid!>

;weightF_EWK: 1
weightF_EWK: VHbb::ptWeightEWK_Zll(nGenVbosons[0], GenVbosons_pt[0], VtypeSim, GenVbosons_pdgId[0], nGenTop, nGenHiggsBoson)




;weightF_bTagWeightHF_UP: bTagWeight_HFUp*sign(genWeight)*VHbb::weight2(nTrueInt)
;weightF_bTagWeightHF_DOWN: bTagWeight_HFDown*sign(genWeight)*VHbb::weight2(nTrueInt)
;weightF_sys_UP: sign(genWeight)  ; * puWeight
;weightF_sys_DOWN: sign(genWeight)  ; * puWeight
;weightF_QCD_UP: sign(genWeight)  ; * puWeight
;weightF_QCD_DOWN: sign(genWeight)  ; * puWeight
[Cuts]

# BTAG working points
# https://twiki.cern.ch/twiki/bin/viewauth/CMS/BTagPerformanceOP
CSV_Loose = 0.605
CSV_Medium = 0.890
CSV_Tight = 0.970

;!! ---------------------------------
;!! Windows and windows veto
;!! ---------------------------------
zWindow = V_mass > 75. & V_mass < 105
zWindow2 = V.mass > 82. & V.mass < 100.
zVeto =  (V.mass > 105 | V.mass < 75.)
zVetoSmall =  (V.mass > 100 | V.mass < 80.)
vetoHMass_beforeReg = (HNoReg.mass < 90. | HNoReg.mass > 145.)
vetoHMass = (H.mass < 90. | H.mass > 145.)
MassVeto= (H.mass < 90. | H.mass > 150.)
rMed = V.pt > 50. & V.pt < 100.
rMed2 = V.pt > 100. & V.pt < 150.
rMed_120 = V.pt > 100. & V.pt < 120.
rMed_150 = V.pt > 100. & V.pt < 150.
rMed_240 = V.pt > 100. & V.pt < 150.
rLow2 = V.pt > 50.& V.pt < 100.
looseHMass = H.mass > 40. & H.mass < 250.
looseHMass_beforeReg = HNoReg.mass > 40. & HNoReg.mass < 250.
run_range = (run < 207883 || run > 208307)

;!! -------------------------------------------
;!! Preselections (combination of single cuts)
;!! -------------------------------------------
preselection = Jet_pt[hJCidx[0]] > 20. & Jet_pt[hJCidx[1]] > 20. & abs(Jet_eta[hJCidx[0]]) < 2.4 & abs(Jet_eta[hJCidx[1]]) < 2.4 & Jet_puId[hJCidx[0]] > 0. & Jet_puId[hJCidx[1]] > 0.
preselection_beforeReg = (Jet_pt[hJCidx[0]]/hJet_regWeight[0]) > 20. & (Jet_pt[hJCidx[1]]*hJet_regWeight[1]) > 20. & abs(Jet_eta[hJCidx[0]]) < 2.4 & abs(Jet_eta[hJCidx[1]]) < 2.4 & Jet_puId[hJCidx[0]] > 0. & Jet_puId[hJCidx[1]] > 0.
looseBTag = !(Jet_btagCSV[hJCidx[0]] > <!ZHbb|CSV_Loose!> & Jet_btagCSV[hJCidx[1]] > <!ZHbb|CSV_Loose!>) & (Jet_btagCSV[hJCidx[0]] > <!ZHbb|CSV_Loose!> | Jet_btagCSV[hJCidx[1]] > <!ZHbb|CSV_Loose!>)
vtx = Jet_vtx3DVal[hJCidx[0]] > 0. & Jet_vtxPt[hJCidx[0]] > 0.
soft = (1[0]==1 || 1[0] == 1) & Jet_leptonDeltaR[hJCidx[0]] > 0.
Mjj_selection = <!ZHbb|preselection!> & <!ZHbb|ccBtag!> & <!ZHbb|zWindow!> & metPuppi_pt < 60. & <!ZHbb|upperHMass!>

SignalMjjRun1_base = ( <!Cuts|zWindow!> & (HCSV_mass > 40 & HCSV_mass < 250) & Jet_btagCSV[hJCidx[0]] > <!Cuts|CSV_Medium!> & Jet_btagCSV[hJCidx[1]] > <!Cuts|CSV_Loose!> & met_pt < 60 )

;;!! ---------------------
;;!! Plot Regions
;;!! ---------------------

;Add. Jets cuts
addjet = Sum$(Jet_pt>20 && abs(Jet_eta)<2.4 && Jet_puId ==1)

;Isolation cuts
LooseIso = (vLeptons_relIso04[0] < 0.25 & vLeptons_relIso04[1] < 0.25)
TightIso = (vLeptons_relIso04[0] < 0.15 & vLeptons_relIso04[1] < 0.15)

;Pt cuts
pT20 = (vLeptons_pt[0] > 20. & vLeptons_pt[1] > 20.)

;_*_*_*_*_*_*_*_*_*_*_*
;Control Region
;_*_*_*_*_*_*_*_*_*_*_*

;njets =  Sum$(Jet_pt>20 && abs(Jet_eta)<2.5 && Jet_puId>0 && Jet_id>0 && aJCidx != (hJCidx[0]) && (aJCidx != (hJCidx[1])))
njets = Sum$(Jet_pt>20 && abs(Jet_eta)<2.4 && Jet_puId >0 && Jet_id>0 && aJCidx != (hJCidx[0]) && (aJCidx != (hJCidx[1])))

;Inclusive V_pt
CRZlight_incl = (V_mass > 75. & V_mass < 105. & Jet_pt[hJCidx[0]] > 20 & Jet_pt[hJCidx[1]] > 20 & HCSV_pt > 100 & Jet_btagCSV[hJCidx[0]] < <!Cuts|CSV_Tight!> & Jet_btagCSV[hJCidx[1]] > 0 & <!Cuts|addjet!> == 2 & abs(HVdPhi) > 2.9 & <!Cuts|pT20!> & <!Cuts|LooseIso!>)
;No Hpt cut
CRZlight_incl_noHT = (V_mass > 75. & V_mass < 105. & Jet_pt[hJCidx[0]] > 20 & Jet_pt[hJCidx[1]] > 20 & Jet_btagCSV[hJCidx[0]] < <!Cuts|CSV_Tight!> & Jet_btagCSV[hJCidx[1]] > 0 & <!Cuts|addjet!> == 2 & abs(HVdPhi) > 2.9 & <!Cuts|pT20!> & <!Cuts|LooseIso!>)
;For "N-1" plot
;CRZlight_incl = (V_mass > 75. & V_mass < 105. & Jet_pt[hJCidx[0]] > 20 & Jet_pt[hJCidx[1]] > 20 & Jet_btagCSV[hJCidx[0]] < <!Cuts|CSV_Tight!> & Jet_btagCSV[hJCidx[1]] > 0 & <!Cuts|addjet!> == 2 & abs(HVdPhi) > 2.9)
CRZb_incl = (V_mass > 85. & V_mass < 97. & met_pt < 60 & Jet_pt[hJCidx[0]] > 20 & Jet_pt[hJCidx[1]] > 20 & (HCSV_mass < 90 || HCSV_mass > 145) & Jet_btagCSV[hJCidx[0]] > <!Cuts|CSV_Tight!> & Jet_btagCSV[hJCidx[1]] > <!Cuts|CSV_Loose!> & abs(HVdPhi) > 2.9 & <!Cuts|pT20!> & <!Cuts|LooseIso!>)
CRttbar_incl = (Jet_pt[hJCidx[0]] > 20 & Jet_pt[hJCidx[1]] > 20 & HCSV_pt > 100 & (V_mass < 75 || V_mass > 120) & Jet_btagCSV[hJCidx[0]] > <!Cuts|CSV_Tight!> & Jet_btagCSV[hJCidx[1]] > <!Cuts|CSV_Loose!> & <!Cuts|pT20!> & <!Cuts|LooseIso!>)
;CR definition
CRZlight = (<!Cuts|CRZlight_incl!> & V_pt > 100)
CRZlight_noHT = (<!Cuts|CRZlight_incl_noHT!> & V_pt > 100)
CRZlight_noHT_medpt = (<!Cuts|CRZlight_incl_noHT!> & V_pt > 50 & V_pt < 100)
;Cutsnjet
CRZlight0addj = (<!Cuts|CRZlight!> & <!Cuts|njets!> < 0.5)
CRZlightkaddj = (<!Cuts|CRZlight!> & <!Cuts|njets!> > 0.5)
;low V_pt
CRZlight_lowVpt = (<!Cuts|CRZlight_incl!> & V_pt < 100 & V_pt > 50 )
CRZb_lowVpt = (<!Cuts|CRZb_incl!> & V_pt < 100 & V_pt > 50 )
CRttbar_lowVpt = (<!Cuts|CRttbar_incl!> & V_pt < 100 & V_pt > 50 )
;med V_pt
CRZlight_medVpt = (<!Cuts|CRZlight_incl!> & V_pt < 150 & V_pt > 100 )
CRZb_medVpt = (<!Cuts|CRZb_incl!> & V_pt < 150 & V_pt > 100 )
CRttbar_medVpt = (<!Cuts|CRttbar_incl!> & V_pt < 150 & V_pt > 100 )
;high V_pt
CRZlight_highVpt = (<!Cuts|CRZlight_incl!> & V_pt > 150)
CRZb_highVpt = (<!Cuts|CRZb_incl!> & V_pt > 150)
CRttbar_highVpt = (<!Cuts|CRttbar_incl!> & V_pt > 150)
;noCSV cuts
CRttbar_incl_noCSV = (Jet_pt[hJCidx[0]] > 20 & Jet_pt[hJCidx[1]] > 20 & HCSV_pt > 100 & V_mass > 50 & (V_mass < 75 || V_mass > 120) & <!Cuts|pT20!> & <!Cuts|LooseIso!>)

;_*_*_*_*_*_*_*_*_*_*_*
;Signal regions mjj Run1
;_*_*_*_*_*_*_*_*_*_*_*

SignalMjjRun1_lowpt = <!Cuts|SignalMjjRun1_base!> & (V_pt > 50 & V_pt < 100)
SignalMjjRun1_mediumpt = <!Cuts|SignalMjjRun1_base!> & (V_pt > 100 & V_pt < 150)
SignalMjjRun1_highpt = <!Cuts|SignalMjjRun1_base!> & V_pt > 150  & SimpleDeltaR(Jet_pt[hJCidx[0]], Jet_eta[hJCidx[0]], Jet_phi[hJCidx[0]], Jet_mass[hJCidx[0]], Jet_pt[hJCidx[1]], Jet_eta[hJCidx[1]], Jet_phi[hJCidx[1]], Jet_mass[hJCidx[1]]) < 1.6

;_*_*_*_*_*_*_*_*_*_*_*
;Signal regions BDT Run1
;_*_*_*_*_*_*_*_*_*_*_*

SignalBDT_highpt =  (V_mass > 75. & V_mass < 105. & Jet_pt[hJCidx[0]] > 20 & Jet_pt[hJCidx[1]] > 20 & V_pt > 100 & Jet_btagCSV[hJCidx[0]] > 0.5 & Jet_btagCSV[hJCidx[1]] > 0.244 & HCSV_mass < 250 & <!Cuts|pT20!> & <!Cuts|LooseIso!>)
LOGSignalBDT_highpt = <!Cuts|SignalBDT_highpt!>
SignalBDT_lowpt =  (V_mass > 75. & V_mass < 105. & Jet_pt[hJCidx[0]] > 20 & Jet_pt[hJCidx[1]] > 20 & V_pt > 50 & V_pt < 100 & Jet_btagCSV[hJCidx[0]] > 0.5 & Jet_btagCSV[hJCidx[1]] > 0.244 & HCSV_mass < 250 & <!Cuts|pT20!> & <!Cuts|LooseIso!>)
LOGSignalBDT_lowpt = <!Cuts|SignalBDT_lowpt!>

;;!! ---------------------
;;!! Data Cards
;;!! ---------------------

;;!! ---------------------
;;!!TESTs
;;!! ---------------------

;TEST = (V_pt < 150 & V_pt > 100 & V_mass > 75 & V_mass < 105 & HCSV_mass > 40 & HCSV_mass < 250 & Jet_btagCSV[hJCidx[0]] > <!Cuts|CSV_Medium!> & Jet_btagCSV[hJCidx[1]] > <!Cuts|CSV_Loose!> & met_pt < 60)

;_*_*_*_*_*_*_*_*_*_*_*
;BDT
;_*_*_*_*_*_*_*_*_*_*_*

;V1 definition
ZllBDTcut = V_mass > 75 & V_mass < 105 & Jet_pt[hJCidx[0]] > 20 & Jet_pt[hJCidx[1]] > 20 & (HCSV_mass > 40 & HCSV_mass < 250) & V_pt < 100 & V_pt > 50 & Jet_btagCSV[hJCidx[0]] > <!Cuts|CSV_Loose!> & Jet_btagCSV[hJCidx[1]] > <!Cuts|CSV_Loose!>
ZllBDThighVptcut = V_mass > 75 & V_mass < 105 & Jet_pt[hJCidx[0]] > 20 & Jet_pt[hJCidx[1]] > 20 & (HCSV_mass > 40 & HCSV_mass < 250) & V_pt > 100 & Jet_btagCSV[hJCidx[0]] > <!Cuts|CSV_Loose!> & Jet_btagCSV[hJCidx[1]] > <!Cuts|CSV_Loose!>
ZllBDTlowVptcut = V_mass > 75 & V_mass < 105 & Jet_pt[hJCidx[0]] > 20 & Jet_pt[hJCidx[1]] > 20 & (HCSV_mass > 40 & HCSV_mass < 250) & V_pt < 100 & V_pt > 50 & Jet_btagCSV[hJCidx[0]] > <!Cuts|CSV_Loose!> & Jet_btagCSV[hJCidx[1]] > <!Cuts|CSV_Loose!>
ZllBDT =  (V_pt < 150 & V_pt > 100 & V_mass > 75 & V_mass < 105 & HCSV_mass > 40 & HCSV_mass < 250 & Jet_btagCSV[hJCidx[0]] > <!Cuts|CSV_Medium!> & Jet_btagCSV[hJCidx[1]] > <!Cuts|CSV_Loose!> & met_pt < 60)

;David definitions
ZllBDThighVptcut_v2 = V_mass > 75 & V_mass < 105 & Jet_pt[hJCidx[0]] > 20 & Jet_pt[hJCidx[1]] > 20 & (HCSV_mass > 40 & HCSV_mass < 250) & V_pt > 100 & Jet_btagCSV[hJCidx[0]] > <!Cuts|CSV_Loose!> & Jet_btagCSV[hJCidx[1]] > <!Cuts|CSV_Loose!> & abs(Jet_eta[hJCidx[0]]) < 2.4 & abs(Jet_eta[hJCidx[1]]) < 2.4
ZllBDTlowVptcut_v2 = V_mass > 75 & V_mass < 105 & Jet_pt[hJCidx[0]] > 20 & Jet_pt[hJCidx[1]] > 20 & (HCSV_mass > 40 & HCSV_mass < 250) & V_pt < 100 & V_pt > 50 & Jet_btagCSV[hJCidx[0]] > <!Cuts|CSV_Loose!> & Jet_btagCSV[hJCidx[1]] > <!Cuts|CSV_Loose!> & abs(Jet_eta[hJCidx[0]]) < 2.4 & abs(Jet_eta[hJCidx[1]]) < 2.4


;BDTCutTEST = Vtype==0

;!! -----------------------------
;!! Config for the MVA training
;!! -----------------------------

[MVAGeneral]
;!! ------------------
;!! Factory settings
;!! ------------------
type = BDT
SettingsTight = !H:!V:NTrees=450:nEventsMin=550:MaxDepth=3:BoostType=AdaBoost:AdaBoostBeta=0.15:SeparationType=MisClassificationError:nCuts=25:PruneMethod=NoPruning
SettingsLooseBtag = !H:!V:NTrees=400:nEventsMin=500:MaxDepth=3:BoostType=AdaBoost:AdaBoostBeta=0.1:SeparationType=MisClassificationError:nCuts=25:PruneMethod=NoPruning
SettingsMed = !H:!V:NTrees=400:nEventsMin=300:MaxDepth=2:BoostType=AdaBoost:AdaBoostBeta=0.12:SeparationType=MisClassificationError:nCuts=25:PruneMethod=NoPruning
SettingsTight_overtrain = !H:!V:NTrees=400:nEventsMin=2:MaxDepth=5:BoostType=Grad:AdaBoostBeta=0.1:SeparationType=MisClassificationError:nCuts=100:PruneMethod=CostComplexity:PruneStrength=50:GradBaggingFraction=1.0:Shrinkage=0.1:UseBaggedGrad=True:UseRandomisedTrees=False:UseNvars=30
SettingsTight_optimisation = !H:!V:NTrees=400:nEventsMin=500:MaxDepth=3:BoostType=AdaBoost:AdaBoostBeta=0.1:SeparationType=MisClassificationError:nCuts=25:PruneMethod=NoPruning
SettingsTT = !H:!V:NTrees=300:nEventsMin=300:MaxDepth=2:BoostType=AdaBoost:AdaBoostBeta=0.1:SeparationType=MisClassificationError:nCuts=25:PruneMethod=NoPruning
SettingsDY = !H:!V:NTrees=400:nEventsMin=500:MaxDepth=3:BoostType=AdaBoost:AdaBoostBeta=0.1:SeparationType=MisClassificationError:nCuts=25:PruneMethod=NoPruning
SettingsVV = !H:!V:NTrees=250:nEventsMin=250:MaxDepth=2:BoostType=AdaBoost:AdaBoostBeta=0.1:SeparationType=MisClassificationError:nCuts=25:PruneMethod=NoPruning
SettingsAll = !H:!V:NTrees=300:nEventsMin=300:MaxDepth=2:BoostType=AdaBoost:AdaBoostBeta=0.1:SeparationType=MisClassificationError:nCuts=25:PruneMethod=NoPruning

;Parameter scan
SettingsNTrees100nEventsMin100= !H:!V:NTrees=100:nEventsMin=100:MaxDepth=2:BoostType=AdaBoost:AdaBoostBeta=0.1:SeparationType=MisClassificationError:nCuts=25:PruneMethod=NoPruning
SettingsNTrees150nEventsMin100= !H:!V:NTrees=150:nEventsMin=100:MaxDepth=2:BoostType=AdaBoost:AdaBoostBeta=0.1:SeparationType=MisClassificationError:nCuts=25:PruneMethod=NoPruning
SettingsNTrees200nEventsMin100= !H:!V:NTrees=200:nEventsMin=100:MaxDepth=2:BoostType=AdaBoost:AdaBoostBeta=0.1:SeparationType=MisClassificationError:nCuts=25:PruneMethod=NoPruning
SettingsNTrees250nEventsMin100= !H:!V:NTrees=250:nEventsMin=100:MaxDepth=2:BoostType=AdaBoost:AdaBoostBeta=0.1:SeparationType=MisClassificationError:nCuts=25:PruneMethod=NoPruning
SettingsNTrees300nEventsMin100= !H:!V:NTrees=300:nEventsMin=100:MaxDepth=2:BoostType=AdaBoost:AdaBoostBeta=0.1:SeparationType=MisClassificationError:nCuts=25:PruneMethod=NoPruning
SettingsNTrees400nEventsMin100= !H:!V:NTrees=400:nEventsMin=100:MaxDepth=2:BoostType=AdaBoost:AdaBoostBeta=0.1:SeparationType=MisClassificationError:nCuts=25:PruneMethod=NoPruning

SettingsNTrees100nEventsMin200= !H:!V:NTrees=100:nEventsMin=200:MaxDepth=2:BoostType=AdaBoost:AdaBoostBeta=0.1:SeparationType=MisClassificationError:nCuts=25:PruneMethod=NoPruning
SettingsNTrees150nEventsMin200= !H:!V:NTrees=150:nEventsMin=200:MaxDepth=2:BoostType=AdaBoost:AdaBoostBeta=0.1:SeparationType=MisClassificationError:nCuts=25:PruneMethod=NoPruning
SettingsNTrees200nEventsMin200= !H:!V:NTrees=200:nEventsMin=200:MaxDepth=2:BoostType=AdaBoost:AdaBoostBeta=0.1:SeparationType=MisClassificationError:nCuts=25:PruneMethod=NoPruning
SettingsNTrees250nEventsMin200= !H:!V:NTrees=250:nEventsMin=200:MaxDepth=2:BoostType=AdaBoost:AdaBoostBeta=0.1:SeparationType=MisClassificationError:nCuts=25:PruneMethod=NoPruning
SettingsNTrees300nEventsMin200= !H:!V:NTrees=300:nEventsMin=200:MaxDepth=2:BoostType=AdaBoost:AdaBoostBeta=0.1:SeparationType=MisClassificationError:nCuts=25:PruneMethod=NoPruning
SettingsNTrees400nEventsMin200= !H:!V:NTrees=400:nEventsMin=200:MaxDepth=2:BoostType=AdaBoost:AdaBoostBeta=0.1:SeparationType=MisClassificationError:nCuts=25:PruneMethod=NoPruning

SettingsNTrees100nEventsMin300= !H:!V:NTrees=100:nEventsMin=300:MaxDepth=2:BoostType=AdaBoost:AdaBoostBeta=0.1:SeparationType=MisClassificationError:nCuts=25:PruneMethod=NoPruning
SettingsNTrees150nEventsMin300= !H:!V:NTrees=150:nEventsMin=300:MaxDepth=2:BoostType=AdaBoost:AdaBoostBeta=0.1:SeparationType=MisClassificationError:nCuts=25:PruneMethod=NoPruning
SettingsNTrees200nEventsMin300= !H:!V:NTrees=200:nEventsMin=300:MaxDepth=2:BoostType=AdaBoost:AdaBoostBeta=0.1:SeparationType=MisClassificationError:nCuts=25:PruneMethod=NoPruning
SettingsNTrees250nEventsMin300= !H:!V:NTrees=250:nEventsMin=300:MaxDepth=2:BoostType=AdaBoost:AdaBoostBeta=0.1:SeparationType=MisClassificationError:nCuts=25:PruneMethod=NoPruning
SettingsNTrees300nEventsMin300= !H:!V:NTrees=300:nEventsMin=300:MaxDepth=2:BoostType=AdaBoost:AdaBoostBeta=0.1:SeparationType=MisClassificationError:nCuts=25:PruneMethod=NoPruning
SettingsNTrees400nEventsMin300= !H:!V:NTrees=400:nEventsMin=300:MaxDepth=2:BoostType=AdaBoost:AdaBoostBeta=0.1:SeparationType=MisClassificationError:nCuts=25:PruneMethod=NoPruning

SettingsTight_VV = !H:!V:NTrees=500:nEventsMin=400:MaxDepth=2:BoostType=AdaBoost:AdaBoostBeta=0.1:SeparationType=MisClassificationError:nCuts=20:PruneMethod=CostComplexity:PruneBeforeBoost=False:PruneStrength=3
SettingsMed_VV = !H:!V:NTrees=500:nEventsMin=500:MaxDepth=2:BoostType=AdaBoost:AdaBoostBeta=0.1:SeparationType=MisClassificationError:nCuts=20:PruneMethod=CostComplexity:PruneBeforeBoost=False:PruneStrength=3

;!! define the backgorund for the training.
;!! the "Samples" seciton is in the file "general".
backgrounds8TeV = [<!Samples|allBKG!>]
backgrounds13TeV = [<!Samples|allBKG!>]
backgrounds_Diboson8TeV = [<!Samples|BKG_VV_training!>]


[factory]
;!! -----------------------------------
;!! additional options for the factory
;!! -----------------------------------
factoryname = MVA
factorysettings = !V:Silent:Color:!DrawProgressBar:AnalysisType=Classification:Transformations=I
;:Transformations=I;D;P;G,D

[MVALists]
;!! list to be trained and evaluated
List_for_submitscript: ZllBDT_highVpt,ZllBDT_lowVpt
;List_for_submitscript: ZllBDT_highVpt_v2

;List for BDT scan

;List_for_submitscript: ZllBDT_highVpt_100_100,ZllBDT_highVpt_150_100,ZllBDT_highVpt_200_100,ZllBDT_highVpt_250_100,ZllBDT_highVpt_300_100,ZllBDT_highVpt_400_100,ZllBDT_highVpt_100_200,ZllBDT_highVpt_150_200,ZllBDT_highVpt_200_200,ZllBDT_highVpt_250_200,ZllBDT_highVpt_300_200,ZllBDT_highVpt_400_200,ZllBDT_highVpt_100_300,ZllBDT_highVpt_150_300,ZllBDT_highVpt_200_300,ZllBDT_highVpt_250_300,ZllBDT_highVpt_300_300,ZllBDT_highVpt_400_300

;List_for_submitscript: ZllBDT_lowVpt_100_100,ZllBDT_lowVpt_150_100,ZllBDT_lowVpt_200_100,ZllBDT_lowVpt_250_100,ZllBDT_lowVpt_300_100,ZllBDT_lowVpt_400_100,ZllBDT_lowVpt_100_200,ZllBDT_lowVpt_150_200,ZllBDT_lowVpt_200_200,ZllBDT_lowVpt_250_200,ZllBDT_lowVpt_300_200,ZllBDT_lowVpt_400_200,ZllBDT_lowVpt_100_300,ZllBDT_lowVpt_150_300,ZllBDT_lowVpt_200_300,ZllBDT_lowVpt_250_300,ZllBDT_lowVpt_300_300,ZllBDT_lowVpt_400_300


;List_for_submitscript: ZllBDT_highVpt_100_100,ZllBDT_highVpt_150_100,ZllBDT_highVpt_200_100,ZllBDT_highVpt_250_100,ZllBDT_highVpt_300_100,ZllBDT_highVpt_400_100,ZllBDT_highVpt_100_200,ZllBDT_highVpt_150_200,ZllBDT_highVpt_200_200,ZllBDT_highVpt_250_200,ZllBDT_highVpt_300_200,ZllBDT_highVpt_400_200,ZllBDT_highVpt_100_300,ZllBDT_highVpt_150_300,ZllBDT_highVpt_200_300,ZllBDT_highVpt_250_300,ZllBDT_highVpt_300_300,ZllBDT_highVpt_400_300,ZllBDT_lowVpt_100_100,ZllBDT_lowVpt_150_100,ZllBDT_lowVpt_200_100,ZllBDT_lowVpt_250_100,ZllBDT_lowVpt_300_100,ZllBDT_lowVpt_400_100,ZllBDT_lowVpt_100_200,ZllBDT_lowVpt_150_200,ZllBDT_lowVpt_200_200,ZllBDT_lowVpt_250_200,ZllBDT_lowVpt_300_200,ZllBDT_lowVpt_400_200,ZllBDT_lowVpt_100_300,ZllBDT_lowVpt_150_300,ZllBDT_lowVpt_200_300,ZllBDT_lowVpt_250_300,ZllBDT_lowVpt_300_300,ZllBDT_lowVpt_400_300

;List_for_submitscript: ZllBDT_highVpt_100_100

;List_for_submitscript: ZllBDT_highVpt_100_100
;List_for_submitscript: ShapeSysTEST_ZllBDT_highVpt_100_100

;List_for_submitscript: MicheleBDT,MicheleBDTNoMjj
;RTight_ZH110_janAngularOnly,RTight_ZH115_janAngularOnly,RTight_ZH120_janAngularOnly,RTight_ZH125_janAngularOnly,RTight_ZH130_janAngularOnly,RTight_ZH135_janAngularOnly,RTight_ZH140_janAngularOnly,RTight_ZH145_janAngularOnly,RTight_ZH150_janAngularOnly,RMed_ZH110_janAngularOnly,RMed_ZH115_janAngularOnly,RMed_ZH120_janAngularOnly,RMed_ZH125_janAngularOnly,RMed_ZH130_janAngularOnly,RMed_ZH135_janAngularOnly,RMed_ZH140_janAngularOnly,RMed_ZH145_janAngularOnly,RMed_ZH150_janAngularOnly,RTight_VVb_apr_noWeights,RMed_VVb_apr_noWeights

;[ZllBDT]
;MVAtype: <!MVAGeneral|type!>
;MVAsettings: <!MVAGeneral|SettingsAll!>
;signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
;backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
;treeVarSet: ZllBDTVars
;treeCut: ZllBDTcut
;

;[ZllBDT_highVpt_v2]
;MVAtype: <!MVAGeneral|type!>
;MVAsettings: <!MVAGeneral|SettingsAll!>
;signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
;backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
;treeVarSet: ZllBDTVars
;treeCut: ZllBDThighVptcut

[ZllBDT_highVpt]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsAll!>
signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
treeVarSet: ZllBDTVars
treeCut: ZllBDThighVptcut

[ZllBDT_lowVpt]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsAll!>
signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
treeVarSet: ZllBDTVars
treeCut: ZllBDTlowVptcut
;To TEST shape sys
[ShapeSysTEST_ZllBDT_highVpt_100_100]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsNTrees100nEventsMin100!>
signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
treeVarSet: ZllBDTVars
treeCut: ZllBDThighVptcut

;_*_*_*_*_*_*_*_*_*_*_*
; BDT SCAN
;_*_*_*_*_*_*_*_*_*_*_*

;High pt region

[ZllBDT_highVpt_100_100]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsNTrees100nEventsMin100!>
signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
treeVarSet: ZllBDTVars
treeCut: ZllBDThighVptcut_v2
[ZllBDT_highVpt_150_100]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsNTrees150nEventsMin100!>
signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
treeVarSet: ZllBDTVars
treeCut: ZllBDThighVptcut_v2
[ZllBDT_highVpt_200_100]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsNTrees200nEventsMin100!>
signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
treeVarSet: ZllBDTVars
treeCut: ZllBDThighVptcut_v2
[ZllBDT_highVpt_250_100]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsNTrees250nEventsMin100!>
signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
treeVarSet: ZllBDTVars
treeCut: ZllBDThighVptcut_v2
[ZllBDT_highVpt_300_100]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsNTrees300nEventsMin100!>
signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
treeVarSet: ZllBDTVars
treeCut: ZllBDThighVptcut_v2
[ZllBDT_highVpt_400_100]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsNTrees400nEventsMin100!>
signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
treeVarSet: ZllBDTVars
treeCut: ZllBDThighVptcut_v2
[ZllBDT_highVpt_100_200]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsNTrees100nEventsMin200!>
signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
treeVarSet: ZllBDTVars
treeCut: ZllBDThighVptcut_v2
[ZllBDT_highVpt_150_200]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsNTrees150nEventsMin200!>
signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
treeVarSet: ZllBDTVars
treeCut: ZllBDThighVptcut_v2
[ZllBDT_highVpt_200_200]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsNTrees200nEventsMin200!>
signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
treeVarSet: ZllBDTVars
treeCut: ZllBDThighVptcut_v2
[ZllBDT_highVpt_250_200]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsNTrees250nEventsMin200!>
signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
treeVarSet: ZllBDTVars
treeCut: ZllBDThighVptcut_v2
[ZllBDT_highVpt_300_200]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsNTrees300nEventsMin200!>
signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
treeVarSet: ZllBDTVars
treeCut: ZllBDThighVptcut_v2
[ZllBDT_highVpt_400_200]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsNTrees400nEventsMin200!>
signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
treeVarSet: ZllBDTVars
treeCut: ZllBDThighVptcut_v2
[ZllBDT_highVpt_100_300]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsNTrees100nEventsMin300!>
signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
treeVarSet: ZllBDTVars
treeCut: ZllBDThighVptcut_v2
[ZllBDT_highVpt_150_300]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsNTrees150nEventsMin300!>
signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
treeVarSet: ZllBDTVars
treeCut: ZllBDThighVptcut_v2
[ZllBDT_highVpt_200_300]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsNTrees200nEventsMin300!>
signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
treeVarSet: ZllBDTVars
treeCut: ZllBDThighVptcut_v2
[ZllBDT_highVpt_250_300]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsNTrees250nEventsMin300!>
signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
treeVarSet: ZllBDTVars
treeCut: ZllBDThighVptcut_v2
[ZllBDT_highVpt_300_300]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsNTrees300nEventsMin300!>
signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
treeVarSet: ZllBDTVars
treeCut: ZllBDThighVptcut_v2
[ZllBDT_highVpt_400_300]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsNTrees400nEventsMin300!>
signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
treeVarSet: ZllBDTVars
treeCut: ZllBDThighVptcut_v2

;Low pt region

[ZllBDT_lowVpt_100_100]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsNTrees100nEventsMin100!>
signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
treeVarSet: ZllBDTVars
treeCut: ZllBDTlowVptcut_v2

[ZllBDT_lowVpt_100_100]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsNTrees100nEventsMin100!>
signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
treeVarSet: ZllBDTVars
treeCut: ZllBDTlowVptcut_v2
[ZllBDT_lowVpt_150_100]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsNTrees150nEventsMin100!>
signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
treeVarSet: ZllBDTVars
treeCut: ZllBDTlowVptcut_v2
[ZllBDT_lowVpt_200_100]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsNTrees200nEventsMin100!>
signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
treeVarSet: ZllBDTVars
treeCut: ZllBDTlowVptcut_v2
[ZllBDT_lowVpt_250_100]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsNTrees250nEventsMin100!>
signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
treeVarSet: ZllBDTVars
treeCut: ZllBDTlowVptcut_v2
[ZllBDT_lowVpt_300_100]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsNTrees300nEventsMin100!>
signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
treeVarSet: ZllBDTVars
treeCut: ZllBDTlowVptcut_v2
[ZllBDT_lowVpt_400_100]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsNTrees400nEventsMin100!>
signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
treeVarSet: ZllBDTVars
treeCut: ZllBDTlowVptcut_v2
[ZllBDT_lowVpt_100_200]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsNTrees100nEventsMin200!>
signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
treeVarSet: ZllBDTVars
treeCut: ZllBDTlowVptcut_v2
[ZllBDT_lowVpt_150_200]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsNTrees150nEventsMin200!>
signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
treeVarSet: ZllBDTVars
treeCut: ZllBDTlowVptcut_v2
[ZllBDT_lowVpt_200_200]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsNTrees200nEventsMin200!>
signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
treeVarSet: ZllBDTVars
treeCut: ZllBDTlowVptcut_v2
[ZllBDT_lowVpt_250_200]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsNTrees250nEventsMin200!>
signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
treeVarSet: ZllBDTVars
treeCut: ZllBDTlowVptcut_v2
[ZllBDT_lowVpt_300_200]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsNTrees300nEventsMin200!>
signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
treeVarSet: ZllBDTVars
treeCut: ZllBDTlowVptcut_v2
[ZllBDT_lowVpt_400_200]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsNTrees400nEventsMin200!>
signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
treeVarSet: ZllBDTVars
treeCut: ZllBDTlowVptcut_v2
[ZllBDT_lowVpt_100_300]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsNTrees100nEventsMin300!>
signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
treeVarSet: ZllBDTVars
treeCut: ZllBDTlowVptcut_v2
[ZllBDT_lowVpt_150_300]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsNTrees150nEventsMin300!>
signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
treeVarSet: ZllBDTVars
treeCut: ZllBDTlowVptcut_v2
[ZllBDT_lowVpt_200_300]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsNTrees200nEventsMin300!>
signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
treeVarSet: ZllBDTVars
treeCut: ZllBDTlowVptcut_v2
[ZllBDT_lowVpt_250_300]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsNTrees250nEventsMin300!>
signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
treeVarSet: ZllBDTVars
treeCut: ZllBDTlowVptcut_v2
[ZllBDT_lowVpt_300_300]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsNTrees300nEventsMin300!>
signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
treeVarSet: ZllBDTVars
treeCut: ZllBDTlowVptcut_v2
[ZllBDT_lowVpt_400_300]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsNTrees400nEventsMin300!>
signals: ['ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow']
backgrounds: [<!Samples|TT!>,<!Samples|DY!>,<!Samples|ST!>,<!Samples|WW!>,<!Samples|WZ!>,<!Samples|ZZ!>]
treeVarSet: ZllBDTVars
treeCut: ZllBDTlowVptcut_v2

;Other

[MyBDTAll]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsAll!>
signals: ['ZH','WH']
backgrounds: [<!Samples|TT!>,<!Samples|ZJets!>,<!Samples|WJets!>]
treeVarSet: myVars
treeCut: myTight

[MicheleBDT]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsAll!>
signals: ['ZH','WH','ggZH']
backgrounds: [<!Samples|TT!>,<!Samples|ZJets!>,<!Samples|WJets!>]
treeVarSet: MicheleVars
treeCut: MicheleBDT_HighPt

[MicheleBDTNoMjj]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsAll!>
signals: ['ZH','WH','ggZH']
backgrounds: [<!Samples|TT!>,<!Samples|ZJets!>,<!Samples|WJets!>]
treeVarSet: MicheleVarsNoMjj
treeCut: MicheleBDT_HighPt

[MyBDTAll2]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsAll!>
signals: ['ZH','WH']
backgrounds: [<!Samples|TT!>,<!Samples|ZJets!>,<!Samples|WJets!>]
treeVarSet: myVars2
treeCut: myTight

[MyBDT-TT]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsTT!>
signals: ['ZH']
backgrounds: ['TT']
treeVarSet: myVars
treeCut: myTight

[MyBDT-ZJets]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsTT!>
signals: ['ZH']
backgrounds: ['ZJetsHT100','ZJetsHT200','ZJetsHT400','ZJetsHT600']
treeVarSet: myVars
treeCut: myTight

;!! individual BKGds training
[TT_HighPt_ZH125_nov]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsTT!>
signals: ['ZH125']
backgrounds: [<!Samples|Top!>]
treeVarSet: treeVarsICHEP
treeCut: RTight

[DY_HighPt_ZH125_nov]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsDY!>
signals: ['ZH125']
backgrounds: [<!Samples|DrellYan!>]
treeVarSet: treeVarsICHEP
treeCut: RTight_andTT

[VV_HighPt_ZH125_nov]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsVV!>
signals: ['ZH125']
backgrounds: [<!Samples|Diboson!>]
treeVarSet: treeVarsICHEP
treeCut: RTight_andDY

;!! ---------------------------------------------
;!! LHCP - ICHEP VARIABLES + ANGULAR VARIABLES
;!! ---------------------------------------------
;!! ZZbb training
[RTight_ZZbb_oct_noang4]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsTight!>
signals: ['VVb']
backgrounds: <!MVAGeneral|backgrounds8TeV!>
treeVarSet: treeVarsSystMass
treeCut: RTight

[RMed_ZZbb_oct_noang]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsTight!>
signals: ['VVb']
backgrounds: <!MVAGeneral|backgrounds8TeV!>
treeVarSet: treeVarsSystMass
treeCut: RMed


; no weights

[RTight_ZH125_janAngularOnly_noWeights]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsTight!>
signals: ['ZH125']
backgrounds: <!MVAGeneral|backgrounds8TeV!>
treeVarSet: treeVarsAngularOnly
treeCut: myTight

[RMed_ZH125_janAngularOnly_noWeights]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsMed!>
signals: ['ZH125']
backgrounds: <!MVAGeneral|backgrounds8TeV!>
treeVarSet: treeVarsAngularOnly
treeCut: RMed

[RTight_VVb_apr_noWeights]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsTight_VV!>
signals: ['AltZZb','AltWZb','ZZb','WZb']
backgrounds: <!MVAGeneral|backgrounds_Diboson8TeV!>
treeVarSet: treeVarsAngularOnly
treeCut: RTight

[RMed_VVb_apr_noWeights]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsMed_VV!>
signals: ['AltZZb','AltWZb','ZZb','WZb']
backgrounds: <!MVAGeneral|backgrounds_Diboson8TeV!>
treeVarSet: treeVarsAngularOnly
treeCut: RMed

;!! RTight

[RTight_ZH110_janAngularOnly]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsTight!>
signals: ['ZH110']
backgrounds: <!MVAGeneral|backgrounds8TeV!>
treeVarSet: treeVarsAngularOnly
treeCut: RTight

[RTight_ZH115_janAngularOnly]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsTight!>
signals: ['ZH115']
backgrounds: <!MVAGeneral|backgrounds8TeV!>
treeVarSet: treeVarsAngularOnly
treeCut: RTight

[RTight_ZH120_janAngularOnly]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsTight!>
signals: ['ZH120']
backgrounds: <!MVAGeneral|backgrounds8TeV!>
treeVarSet: treeVarsAngularOnly
treeCut: RTight

[RTight_ZH125_janAngularOnly]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsTight!>
signals: ['ZH125']
backgrounds: <!MVAGeneral|backgrounds8TeV!>
treeVarSet: treeVarsAngularOnly
treeCut: RTight

[RTight_ZH130_janAngularOnly]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsTight!>
signals: ['ZH130']
backgrounds: <!MVAGeneral|backgrounds8TeV!>
treeVarSet: treeVarsAngularOnly
treeCut: RTight

[RTight_ZH135_janAngularOnly]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsTight!>
signals: ['ZH135']
backgrounds: <!MVAGeneral|backgrounds8TeV!>
treeVarSet: treeVarsAngularOnly
treeCut: RTight

[RTight_ZH140_janAngularOnly]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsTight!>
signals: ['ZH140']
backgrounds: <!MVAGeneral|backgrounds8TeV!>
treeVarSet: treeVarsAngularOnly
treeCut: RTight

[RTight_ZH145_janAngularOnly]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsTight!>
signals: ['ZH145']
backgrounds: <!MVAGeneral|backgrounds8TeV!>
treeVarSet: treeVarsAngularOnly
treeCut: RTight

[RTight_ZH150_janAngularOnly]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsTight!>
signals: ['ZH150']
backgrounds: <!MVAGeneral|backgrounds8TeV!>
treeVarSet: treeVarsAngularOnly
treeCut: RTight


;!! RMed

[RMed_ZH110_janAngularOnly]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsMed!>
signals: ['ZH110']
backgrounds: <!MVAGeneral|backgrounds8TeV!>
treeVarSet: treeVarsAngularOnly
treeCut: RMed

[RMed_ZH115_janAngularOnly]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsMed!>
signals: ['ZH115']
backgrounds: <!MVAGeneral|backgrounds8TeV!>
treeVarSet: treeVarsAngularOnly
treeCut: RMed

[RMed_ZH120_janAngularOnly]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsMed!>
signals: ['ZH120']
backgrounds: <!MVAGeneral|backgrounds8TeV!>
treeVarSet: treeVarsAngularOnly
treeCut: RMed

[RMed_ZH125_janAngularOnly]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsMed!>
signals: ['ZH125']
backgrounds: <!MVAGeneral|backgrounds8TeV!>
treeVarSet: treeVarsAngularOnly
treeCut: RMed

[RMed_ZH130_janAngularOnly]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsMed!>
signals: ['ZH130']
backgrounds: <!MVAGeneral|backgrounds8TeV!>
treeVarSet: treeVarsAngularOnly
treeCut: RMed

[RMed_ZH135_janAngularOnly]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsMed!>
signals: ['ZH135']
backgrounds: <!MVAGeneral|backgrounds8TeV!>
treeVarSet: treeVarsAngularOnly
treeCut: RMed

[RMed_ZH140_janAngularOnly]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsMed!>
signals: ['ZH140']
backgrounds: <!MVAGeneral|backgrounds8TeV!>
treeVarSet: treeVarsAngularOnly
treeCut: RMed

[RMed_ZH145_janAngularOnly]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsMed!>
signals: ['ZH145']
backgrounds: <!MVAGeneral|backgrounds8TeV!>
treeVarSet: treeVarsAngularOnly
treeCut: RMed

[RMed_ZH150_janAngularOnly]
MVAtype: <!MVAGeneral|type!>
MVAsettings: <!MVAGeneral|SettingsMed!>
signals: ['ZH150']
backgrounds: <!MVAGeneral|backgrounds8TeV!>
treeVarSet: treeVarsAngularOnly
treeCut: RMed


[Optimisation]

training = RTight_ZH125_janAngularOnly
parameters:NTrees,nEventsMin,MaxDepth,BoostType,AdaBoostBeta,SeparationType,nCuts,PruneMethod,PruneStrength,GradBaggingFraction,Shrinkage,UseBaggedGrad,UseRandomisedTrees,UseNvars

;Var= min max number_of steps. number_of_steps is 0 for only min, 1 for min and max, etc...
NTrees = [100,200,10]
nEventsMin = [50,600,0]
MaxDepth = [4,5,0]
BoostType = ['AdaBoost']
AdaBoostBeta = [0.01,0.2,10]
SeparationType = ['MisClassificationError']
nCuts = [25,150,0]
PruneMethod = ['NoPruning']
PruneStrength = [50]
GradBaggingFraction = [1.0]
Shrinkage = [0.1]
UseBaggedGrad = ['True']
UseRandomisedTrees = ['False']
UseNvars = [30]
#!! ----------------------------------------------------
#!! LIMIT
#!! config to configure datacard and workspace writing
#!! ----------------------------------------------------

[LimitGeneral]
#!! --------------------------------------
##!! Binning:
##!! --------------------------------------

HMassRange = 10,80,145
btagrange = 50,0,1
BDTrange = 20,-1,1
CSVrange = 20, 0, 1

#!! --------------------------------------
#!! Systematics
#!! --------------------------------------

#info: can add a variable addSample_sys in order to include systematics
sys_BDT = ['JER','JES']
;sys_BDT = []
sys_Mjj = ['JER','JES','beff','bmis','beff1']
;!! systematics for the control region fit
sys_cr = ['JER','JES']
;For SF by CR only
;sys_cr = []
;!! configuration of systematics effects and behaviour
sys_factor = {'JER':1.0,'JES':1.0,'beff':1.0,'bmis':1.0,'beff1':1.0}
sys_affecting = {'JER':['ZHbb','DYlight','DY2b','DY1b','VVlight','TT','ST','ggZHbb','VVHF','Zbb','Zb','Z_udscg'],'JES':['ZHbb','DYlight','DY2b','DY1b','VVlight','TT','ST','ggZHbb','VVHF','Zbb','Zb','Z_udscg'],'beff':['ZH','ZH125','DYlight','DY2b','DY1b','VVlight','TT','ST','VVHF'],'beff1':['ZH','ZH125'],'bmis':['ZH','DYlight','DY2b','DY1b','VVlight','TT','ST','ZH125','VVHF']}
;!! Add a different Cut (syntax: 'oldVar>newVar?' -> '?' will then automatically be replaced with 'Up'/'Down' for the variations)
;!! i.e. If the option is not nominal, 'oldecut>newcut?' substitute the string 'oldcut' in the dc cut by the string 'newcut'
sys_cut_suffix = {'JER':'nominal','JES':'nominal','beff':'csv>csv?','bmis':'csv>csvF?','beff1':'csv>csv?'}
;weightF_sys = ['weightF_bTagHF','weightF_bTagLF','weightF_bTagStats1','weightF_bTagStats2','weightF_bTagcErr1','weightF_bTagcErr2','puWeight']
;weightF_sys = ['weightF_bTagHF', 'weightF_bTagLF','weightF_bTagLFStats1','weightF_bTagLFStats2','weightF_bTagHFStats1','weightF_bTagHFStats2','weightF_bTagcErr1','weightF_bTagcErr2','weightF_pileUp']
;weightF_sys_CR = ['weightF_bTagHF', 'weightF_bTagLF','weightF_bTagLFStats1','weightF_bTagLFStats2','weightF_bTagHFStats1','weightF_bTagHFStats2','weightF_bTagcErr1','weightF_bTagcErr2','weightF_pileUp']
;no bTAG weights
weightF_sys = ['weightF_pileUp']
;weightF_sys = []
;weightF_sys_CR = ['weightF_pileUp']
;For SF by CR only
;weightF_sys_CR = []
;!! Rebinning procedure for the BDT. Only suitable for BDT
;!! For Mjj or for control region put False.
rebin_active = True
;!! The sys_cut_include is a list of the Group names. The groups listed already have the cuts included i.e. the "cut" variable from the dc is not applied on those samples
sys_cut_include = ['DYJets','qqZHbb','DATA']

#!! --------------------------------------
##!! Options
##!! --------------------------------------
#!! rescale stat shapes by sqrtN
rescaleSqrtN: False
#!! blind Data
blind: True
#!! toy Data
toy: False
#!! bin-by-bin statistics (sqrtN doesn't apply). Put False for CR/True for BDT
binstat: True
;binstat: False
#!! no stat shapes at all: Put True for CR/False for BDT
ignore_stats: False
;ignore_stats: True
#!! inject signal, e.g. ZH125 (working?)
signal_inject: None
#!! add signal als BKG, e.g. ZH125 (working?)
add_signal_as_bkg: None


#!! --------------------------------------
##!! Samples
##!! --------------------------------------
##!! Datacard samples setup (1st Signal, afterwards BKG)

;correspond in the group as defined in plot general ;setup: ['ZHbb','Z_udscg','Zb','Zbb','TT','VVlight','VVHF','VVHF','ST']
setup: ['ZHbb','ggZHbb','Z_udscg','Zb','Zbb','TT','VVlight','VVHF','ST']
;setup: ['ZHbb', 'DiBoson','Zbb','Zb','Z_udscg', 'TT','ST']
#All BKG samples
BKG = [<!Plot_general|allBKG!>]
Group = <!Plot_general|Group_dc!>

#!! --------------------------------------
#!! Naming
#!! --------------------------------------
#!! naming of processes
Dict = {'VH':'VH', 'ZHbb':'ZH', 'ggZHbb':'ggZH','Zbb':'Zj2b','Zb':'Zj1b','Z_udscg':'Zj0b','TT':'TT','ST':'s_Top','VVlight':'VVLF','VVHF':'VVHF','VVHF':'VVHF'}
systematicsnaming = {'JER':'CMS_res_j', 'JES':'CMS_scale_j', 'stats':'CMS_vhbb_ZnnHighPt_stats', 'weightF_sys':'UEPS', 'weightF_QCD':'CMS_vhbb_boost_QCD', 'model':'CMS_vhbb_Wj0bModel_ZnnHighPt_13TeV', 'weightF_bTagHF':'CMS_vhbb_bTagWeightHF', 'weightF_bTagLF':'CMS_vhbb_bTagWeightLF', 'weightF_bTagLFStats1':'CMS_vhbb_bTagWeightLFStats1', 'weightF_bTagLFStats2':'CMS_vhbb_bTagWeightLFStats2', 'weightF_bTagHFStats1':'CMS_vhbb_bTagHFWeightHFStats1', 'weightF_bTagHFStats2':'CMS_vhbb_bTagHFWeightStats2', 'weightF_bTagStats1':'CMS_vhbb_bTagWeightStats1', 'weightF_bTagStats2':'CMS_vhbb_bTagWeightStats2', 'weightF_bTagcErr1':'CMS_vhbb_bTagWeightcErr1', 'weightF_bTagcErr2':'CMS_vhbb_bTagWeightcErr2', 'weightF_pileUp':'CMS_vhbb_puWeight'}
;Dict = {'DYJets':'DY','qqZHbb':'qqZHbb'}

;;;!! --------------------------------------
;;;!! to be processed in batch mode
;;;!! --------------------------------------

;_*_*_*_*_*_*_*_*_*_*_*
;FOR BDT SCAN
;_*_*_*_*_*_*_*_*_*_*_*

;test

;List: BDTscan_lowpt100_100
;List: BDTscan_highpt100_100

;all
;List: BDTscan_lowpt100_100,BDTscan_lowpt150_100,BDTscan_lowpt200_100,BDTscan_lowpt250_100,BDTscan_lowpt300_100,BDTscan_lowpt400_100,BDTscan_lowpt100_200,BDTscan_lowpt150_200,BDTscan_lowpt200_200,BDTscan_lowpt250_200,BDTscan_lowpt300_200,BDTscan_lowpt400_200,BDTscan_lowpt100_300,BDTscan_lowpt150_300,BDTscan_lowpt200_300,BDTscan_lowpt250_300,BDTscan_lowpt300_300,BDTscan_lowpt400_300,BDTscan_highpt100_100,BDTscan_highpt150_100,BDTscan_highpt200_100,BDTscan_highpt250_100,BDTscan_highpt300_100,BDTscan_highpt400_100,BDTscan_highpt100_200,BDTscan_highpt150_200,BDTscan_highpt200_200,BDTscan_highpt250_200,BDTscan_highpt300_200,BDTscan_highpt400_200,BDTscan_highpt100_300,BDTscan_highpt150_300,BDTscan_highpt200_300,BDTscan_highpt250_300,BDTscan_highpt300_300,BDTscan_highpt400_300

;_*_*
;BDT
;_*_*

;List: First_dc_lowpt
List: First_dc_highpt
;List: First_dc_highpt,First_dc_lowpt

;_*_*
;SF
;_*_*
;CR and SR combined
;List: First_dc_CRZlight,First_dc_CRZHF,First_dc_CRTTbar,First_dc_highpt,First_dc_lowpt

;From CR only
;List: SF_dc_CRZlight,SF_dc_CRZHF,SF_dc_CRTTbar

;;!! --------------------------------------
;;!! Datacards specif setup
;;!! --------------------------------------

;;List here the lnN sys in use
[Datacard]

;_*_*_*_*_*_*_*_*_*_*_*
;Systematics
;_*_*_*_*_*_*_*_*_*_*_*
;InUseCommon = ['lumi_13TeV', 'pdf_qqbar', 'pdf_gg', 'QCDscale_VH', 'QCDscale_ttbar', 'QCDscale_VV', 'CMS_vhbb_boost_EWK_13TeV', 'CMS_vhbb_boost_QCD_13TeV', 'CMS_vhbb_ST', 'CMS_vhbb_VV', 'QCDscale_VH_ggZHacceptance_lowPt','QCDscale_VH_ggZHacceptance_highPt']
InUseCommon = ['lumi_13TeV', 'pdf_qqbar', 'pdf_gg', 'QCDscale_VH', 'QCDscale_ttbar', 'QCDscale_VV', 'CMS_vhbb_boost_EWK_13TeV', 'CMS_vhbb_boost_QCD_13TeV', 'CMS_vhbb_ST', 'CMS_vhbb_VV','CMS_vhbb_eff_m_13TeV']
;, 'CMS_vhbb_trigger_MET']
InUseSF = ['CMS_vhbb_Zj0b_SF_Zll_13TeV', 'CMS_vhbb_Zjb_SF_Zll_13TeV', 'CMS_vhbb_TT_SF_Zll_13TeV']
;InUseSF = []
InUse_BDT_NoSysRegion = <!Datacard|InUseCommon!> + <!Datacard|InUseSF!>
InUse_BDT_HighPt = <!Datacard|InUse_BDT_NoSysRegion!> + ['QCDscale_VH_ggZHacceptance_highPt']
;InUse_BDT_LowPt= <!Datacard|InUse_BDT_NoSysRegion!> + ['QCDscale_VH_ggZHacceptance_lowPt']
;InUse_BDT_HighPt = []
InUse_BDT_LowPt= []

InUse_cr_NoSysRegion = <!Datacard|InUseSF!> + <!Datacard|InUseCommon!>
;For SF by CR only
;InUse_cr_NoSysRegion = []
;InUse_NoSysRegion = <!Datacard|InUseCommon!> + <!Datacard|InUseSF!>

;Setup the rate parameters for the SF fits
;rateParams = ['SF_TT','SF_Zj0b','SF_Zjb']


;Limits
rateParams_BDT_HighPt = []
rateParams_BDT_LowPt = []

;SF
;rateParams_BDT_HighPt = <!Datacard|rateParams!>
;rateParams_BDT_LowPt = <!Datacard|rateParams!>

rateParams_cr_NoSysRegion = <!Datacard|rateParams!>
rateParams_cr_NoSysRegion = <!Datacard|rateParams!>

;!! ---------------
;!! Sys definitions
;!! ---------------
;!!!Do not put Groups but same elements as in setup

;the systematic on luminosity is around 2% for all samples NOT data driven: ggZH, ZH, WH, VV, ST, QCD
lumi_13TeV = {'type':'lnN', 'ZHbb':1.04, 'Zj0b':1.04, 'Zj1b':1.04, 'Zj2b':1.04, 'TT':1.04, 'ggZHbb':1.04, 'ZH':1.04, 'ST':1.04,'VVlight':1.04,'VVHF':1.04}

;the systematic on qq PDF is around 1% for all samples NOT data driven and generate by qq: ZH, WH, VV, ST
pdf_qqbar = {'type':'lnN', 'ZHbb':1.023, 'VVlight':1.01,'VVHF':1.01, 'Zj0b':1.01, 'Zj1b':1.01, 'Zj2b':1.01}
;the systematic on qq PDF is around 1% for all samples NOT data driven and generate by gg: ggZH, ST, QCD
pdf_gg = {'type':'lnN', 'ggZHbb':1.18, 'ST':1.01,'QCD':1.01, 'TT':1.01}

QCDscale_VH = {'type':'lnN', 'ZHbb':1.04}
QCDscale_ttbar = {'type':'lnN', 'ST':1.06}
QCDscale_VV = {'type':'lnN', 'VVlight':1.04,'VVHF':1.04}

CMS_vhbb_boost_EWK_13TeV = {'type':'lnN', 'ggZHbb':1.02, 'ZHbb':1.02}
CMS_vhbb_boost_QCD_13TeV = {'type':'lnN', 'ggZHbb':1.05, 'ZHbb':1.05}

CMS_vhbb_ST = {'type':'lnN', 'ST':1.15}
CMS_vhbb_VV = {'type':'lnN', 'VVlight':1.15,'VVHF':1.15}

;CMS_vhbb_Zj1b_SF_Zll_13TeV = {'type':'lnN', 'Zb':1.5}
CMS_vhbb_Zj0b_SF_Zll_13TeV = {'type':'lnN', 'Z_udscg':1.013}
CMS_vhbb_Zjb_SF_Zll_13TeV = {'type':'lnN', 'Zb':1.054,'Zbb':1.054}
CMS_vhbb_TT_SF_Zll_13TeV = {'type':'lnN', 'TT':1.032}

CMS_vhbb_QCD_SF_Zll_13TeV = {'type':'lnN', 'QCD':1.04}
CMS_vhbb_eff_m_13TeV = {'type':'lnN', 'ZHbb':1.05, 'Zj0b':1.05, 'Zj1b':1.05, 'Zj2b':1.05, 'TT':1.05, 'ggZHbb':1.05, 'ZH':1.05, 'ST':1.05,'VVlight':1.05,'VVHF':1.05}

QCDscale_VH_ggZHacceptance_lowPt = {'type':'lnN', 'ggZHbb':1.32}
QCDscale_VH_ggZHacceptance_highPt = {'type':'lnN', 'ggZHbb':1.32}

;CR and SR
SF_TT   = {'TT':0.96448}
SF_Zj0b  = {'Zj0b':0.95899}
SF_Zjb  = {'Zj1b':0.82213,'Zj2b':0.82213}
;CR only
;SF_TT   = {'TT':9.6448}
;SF_Zj0b  = {'Zj0b':0.95899}
;SF_Zjb  = {'Zj1b':0.82213,'Zj2b':0.82213}
;SF_TT   = {'TT':1}
;SF_Zj0b  = {'Zj0b':1}
;SF_Zjb  = {'Zj1b':1,'Zj2b':1}

#!! -------------------------
#!! Limit definitions
#!! -------------------------

;======================
;For SF fit
;======================

;(CR SF fit only)
;
[dc:SF_dc_CRZlight]
var = Jet_btagCSV[hJCidx[0]]
wsVarName = ChCRZlight_13TeV
range = <!LimitGeneral|CSVrange!>
dcName = ZmmCRZlight_13TeV
cut = CRZlight
signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
dcBin = CRZlight
data = data_SM_2015D_topup data_SM_2015D_1280lumi
type = cr
[dc:SF_dc_CRZHF]
var = Jet_btagCSV[hJCidx[1]]
wsVarName = ChCRZHF_13TeV
range = <!LimitGeneral|CSVrange!>
dcName = ZmmCRZHF_13TeV
cut = CRZb_incl
signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
dcBin = CRZHF
data = data_SM_2015D_topup data_SM_2015D_1280lumi
type = cr
[dc:SF_dc_CRTTbar]
var = Jet_btagCSV[hJCidx[1]]
wsVarName = ChCRTTbar_13TeV
range = <!LimitGeneral|CSVrange!>
dcName = ZmmCRTTbar_13TeV
cut = CRttbar_incl
signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
dcBin = CRTTbar
data = data_SM_2015D_topup data_SM_2015D_1280lumi
type = cr
[dc:SF_dc_CRZlight]

;(CR and SR SF fit )

;_*_*_*_*_*_*_*_*_*_*_*
;Control Regions
;_*_*_*_*_*_*_*_*_*_*_*

[dc:First_dc_CRZlight]
var = ZllBDT_highVpt.nominal
wsVarName = ChCRZlight_13TeV
range = <!LimitGeneral|CSVrange!>
dcName = First_ZmmCRZlight_13TeV
cut = CRZlight
signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
dcBin = CRZlight
data = data_SM_2015D_topup data_SM_2015D_1280lumi
type = cr
[dc:First_dc_CRZHF]
var = ZllBDT_highVpt.nominal
wsVarName = ChCRZHF_13TeV
range = <!LimitGeneral|CSVrange!>
dcName = First_ZmmCRZHF_13TeV
cut = CRZb_incl
signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
dcBin = CRZHF
data = data_SM_2015D_topup data_SM_2015D_1280lumi
type = cr
[dc:First_dc_CRTTbar]
var = ZllBDT_highVpt.nominal
wsVarName = ChCRTTbar_13TeV
range = <!LimitGeneral|CSVrange!>
dcName = First_ZmmCRTTbar_13TeV
cut = CRttbar_incl
signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
dcBin = CRTTbar
data = data_SM_2015D_topup data_SM_2015D_1280lumi
type = cr

;_*_*_*_*_*_*_*_*_*_*_*
;Signal Regions
;_*_*_*_*_*_*_*_*_*_*_*


[dc:First_dc_lowpt]
var = ZllBDT_lowVpt.nominal
wsVarName = ChLowPt_13TeV
range = <!LimitGeneral|BDTrange!>
dcName = ZmmLowPt_13TeV
cut = SignalBDT_lowpt
signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
dcBin = Vpt1
data = data_SM_2015D_topup
type= BDT
[dc:First_dc_highpt]
var = ZllBDT_highVpt.nominal
wsVarName = ChHighPt_13TeV
range = <!LimitGeneral|BDTrange!>
dcName = ZmmHighPt_13TeV
cut = SignalBDT_highpt
signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
dcBin = Vpt2
data = data_SM_2015D_topup
type= BDT

;======================
;For BDT Scan
;======================

;lowpt

;[dc:BDTscan_lowpt100_100]
;var = ZllBDT_lowVpt_100_100.nominal
;wsVarName = _BDT_lowpt_preliminary_13TeV
;range = <!LimitGeneral|BDTrange!>
;dcName = BDT_lowpt_Scan100_100
;cut = ZllBDTlowVptcut_v2
;signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
;dcBin = _BDT_lowpt_preliminary_13TeV
;data = data_SM_2015D_topup
;type= BDT
;[dc:BDTscan_lowpt150_100]
;var = ZllBDT_lowVpt_150_100.nominal
;wsVarName = _BDT_lowpt_preliminary_13TeV
;range = <!LimitGeneral|BDTrange!>
;dcName = BDT_lowpt_Scan150_100
;cut = ZllBDTlowVptcut_v2
;signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
;dcBin = _BDT_lowpt_preliminary_13TeV
;data = data_SM_2015D_topup
;type= BDT
;[dc:BDTscan_lowpt200_100]
;var = ZllBDT_lowVpt_200_100.nominal
;wsVarName = _BDT_lowpt_preliminary_13TeV
;range = <!LimitGeneral|BDTrange!>
;dcName = BDT_lowpt_Scan200_100
;cut = ZllBDTlowVptcut_v2
;signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
;dcBin = _BDT_lowpt_preliminary_13TeV
;data = data_SM_2015D_topup
;type= BDT
;[dc:BDTscan_lowpt250_100]
;var = ZllBDT_lowVpt_250_100.nominal
;wsVarName = _BDT_lowpt_preliminary_13TeV
;range = <!LimitGeneral|BDTrange!>
;dcName = BDT_lowpt_Scan250_100
;cut = ZllBDTlowVptcut_v2
;signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
;dcBin = _BDT_lowpt_preliminary_13TeV
;data = data_SM_2015D_topup
;type= BDT
;[dc:BDTscan_lowpt300_100]
;var = ZllBDT_lowVpt_300_100.nominal
;wsVarName = _BDT_lowpt_preliminary_13TeV
;range = <!LimitGeneral|BDTrange!>
;dcName = BDT_lowpt_Scan300_100
;cut = ZllBDTlowVptcut_v2
;signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
;dcBin = _BDT_lowpt_preliminary_13TeV
;data = data_SM_2015D_topup
;type= BDT
;[dc:BDTscan_lowpt400_100]
;var = ZllBDT_lowVpt_400_100.nominal
;wsVarName = _BDT_lowpt_preliminary_13TeV
;range = <!LimitGeneral|BDTrange!>
;dcName = BDT_lowpt_Scan400_100
;cut = ZllBDTlowVptcut_v2
;signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
;dcBin = _BDT_lowpt_preliminary_13TeV
;data = data_SM_2015D_topup
;type= BDT
;[dc:BDTscan_lowpt100_200]
;var = ZllBDT_lowVpt_100_200.nominal
;wsVarName = _BDT_lowpt_preliminary_13TeV
;range = <!LimitGeneral|BDTrange!>
;dcName = BDT_lowpt_Scan100_200
;cut = ZllBDTlowVptcut_v2
;signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
;dcBin = _BDT_lowpt_preliminary_13TeV
;data = data_SM_2015D_topup
;type= BDT
;[dc:BDTscan_lowpt150_200]
;var = ZllBDT_lowVpt_150_200.nominal
;wsVarName = _BDT_lowpt_preliminary_13TeV
;range = <!LimitGeneral|BDTrange!>
;dcName = BDT_lowpt_Scan150_200
;cut = ZllBDTlowVptcut_v2
;signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
;dcBin = _BDT_lowpt_preliminary_13TeV
;data = data_SM_2015D_topup
;type= BDT
;[dc:BDTscan_lowpt200_200]
;var = ZllBDT_lowVpt_200_200.nominal
;wsVarName = _BDT_lowpt_preliminary_13TeV
;range = <!LimitGeneral|BDTrange!>
;dcName = BDT_lowpt_Scan200_200
;cut = ZllBDTlowVptcut_v2
;signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
;dcBin = _BDT_lowpt_preliminary_13TeV
;data = data_SM_2015D_topup
;type= BDT
;[dc:BDTscan_lowpt250_200]
;var = ZllBDT_lowVpt_250_200.nominal
;wsVarName = _BDT_lowpt_preliminary_13TeV
;range = <!LimitGeneral|BDTrange!>
;dcName = BDT_lowpt_Scan250_200
;cut = ZllBDTlowVptcut_v2
;signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
;dcBin = _BDT_lowpt_preliminary_13TeV
;data = data_SM_2015D_topup
;type= BDT
;[dc:BDTscan_lowpt300_200]
;var = ZllBDT_lowVpt_300_200.nominal
;wsVarName = _BDT_lowpt_preliminary_13TeV
;range = <!LimitGeneral|BDTrange!>
;dcName = BDT_lowpt_Scan300_200
;cut = ZllBDTlowVptcut_v2
;signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
;dcBin = _BDT_lowpt_preliminary_13TeV
;data = data_SM_2015D_topup
;type= BDT
;[dc:BDTscan_lowpt400_200]
;var = ZllBDT_lowVpt_400_200.nominal
;wsVarName = _BDT_lowpt_preliminary_13TeV
;range = <!LimitGeneral|BDTrange!>
;dcName = BDT_lowpt_Scan400_200
;cut = ZllBDTlowVptcut_v2
;signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
;dcBin = _BDT_lowpt_preliminary_13TeV
;data = data_SM_2015D_topup
;type= BDT
;[dc:BDTscan_lowpt100_300]
;var = ZllBDT_lowVpt_100_300.nominal
;wsVarName = _BDT_lowpt_preliminary_13TeV
;range = <!LimitGeneral|BDTrange!>
;dcName = BDT_lowpt_Scan100_300
;cut = ZllBDTlowVptcut_v2
;signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
;dcBin = _BDT_lowpt_preliminary_13TeV
;data = data_SM_2015D_topup
;type= BDT
;[dc:BDTscan_lowpt150_300]
;var = ZllBDT_lowVpt_150_300.nominal
;wsVarName = _BDT_lowpt_preliminary_13TeV
;range = <!LimitGeneral|BDTrange!>
;dcName = BDT_lowpt_Scan150_300
;cut = ZllBDTlowVptcut_v2
;signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
;dcBin = _BDT_lowpt_preliminary_13TeV
;data = data_SM_2015D_topup
;type= BDT
;[dc:BDTscan_lowpt200_300]
;var = ZllBDT_lowVpt_200_300.nominal
;wsVarName = _BDT_lowpt_preliminary_13TeV
;range = <!LimitGeneral|BDTrange!>
;dcName = BDT_lowpt_Scan200_300
;cut = ZllBDTlowVptcut_v2
;signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
;dcBin = _BDT_lowpt_preliminary_13TeV
;data = data_SM_2015D_topup
;type= BDT
;[dc:BDTscan_lowpt250_300]
;var = ZllBDT_lowVpt_250_300.nominal
;wsVarName = _BDT_lowpt_preliminary_13TeV
;range = <!LimitGeneral|BDTrange!>
;dcName = BDT_lowpt_Scan250_300
;cut = ZllBDTlowVptcut_v2
;signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
;dcBin = _BDT_lowpt_preliminary_13TeV
;data = data_SM_2015D_topup
;type= BDT
;[dc:BDTscan_lowpt300_300]
;var = ZllBDT_lowVpt_300_300.nominal
;wsVarName = _BDT_lowpt_preliminary_13TeV
;range = <!LimitGeneral|BDTrange!>
;dcName = BDT_lowpt_Scan300_300
;cut = ZllBDTlowVptcut_v2
;signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
;dcBin = _BDT_lowpt_preliminary_13TeV
;data = data_SM_2015D_topup
;type= BDT
;[dc:BDTscan_lowpt400_300]
;var = ZllBDT_lowVpt_400_300.nominal
;wsVarName = _BDT_lowpt_preliminary_13TeV
;range = <!LimitGeneral|BDTrange!>
;dcName = BDT_lowpt_Scan400_300
;cut = ZllBDTlowVptcut_v2
;signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
;dcBin = _BDT_lowpt_preliminary_13TeV
;data = data_SM_2015D_topup
;type= BDT
;
;;highpt
;
;[dc:BDTscan_highpt100_100]
;var = ZllBDT_highVpt_100_100.nominal
;wsVarName = _BDT_highpt_preliminary_13TeV
;range = <!LimitGeneral|BDTrange!>
;dcName = BDT_highpt_Scan100_100
;cut = ZllBDThighVptcut_v2
;signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
;dcBin = _BDT_highpt_preliminary_13TeV
;data = data_SM_2015D_topup
;type= BDT
;[dc:BDTscan_highpt150_100]
;var = ZllBDT_highVpt_150_100.nominal
;wsVarName = _BDT_highpt_preliminary_13TeV
;range = <!LimitGeneral|BDTrange!>
;dcName = BDT_highpt_Scan150_100
;cut = ZllBDThighVptcut_v2
;signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
;dcBin = _BDT_highpt_preliminary_13TeV
;data = data_SM_2015D_topup
;type= BDT
;[dc:BDTscan_highpt200_100]
;var = ZllBDT_highVpt_200_100.nominal
;wsVarName = _BDT_highpt_preliminary_13TeV
;range = <!LimitGeneral|BDTrange!>
;dcName = BDT_highpt_Scan200_100
;cut = ZllBDThighVptcut_v2
;signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
;dcBin = _BDT_highpt_preliminary_13TeV
;data = data_SM_2015D_topup
;type= BDT
;[dc:BDTscan_highpt250_100]
;var = ZllBDT_highVpt_250_100.nominal
;wsVarName = _BDT_highpt_preliminary_13TeV
;range = <!LimitGeneral|BDTrange!>
;dcName = BDT_highpt_Scan250_100
;cut = ZllBDThighVptcut_v2
;signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
;dcBin = _BDT_highpt_preliminary_13TeV
;data = data_SM_2015D_topup
;type= BDT
;[dc:BDTscan_highpt300_100]
;var = ZllBDT_highVpt_300_100.nominal
;wsVarName = _BDT_highpt_preliminary_13TeV
;range = <!LimitGeneral|BDTrange!>
;dcName = BDT_highpt_Scan300_100
;cut = ZllBDThighVptcut_v2
;signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
;dcBin = _BDT_highpt_preliminary_13TeV
;data = data_SM_2015D_topup
;type= BDT
;[dc:BDTscan_highpt400_100]
;var = ZllBDT_highVpt_400_100.nominal
;wsVarName = _BDT_highpt_preliminary_13TeV
;range = <!LimitGeneral|BDTrange!>
;dcName = BDT_highpt_Scan400_100
;cut = ZllBDThighVptcut_v2
;signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
;dcBin = _BDT_highpt_preliminary_13TeV
;data = data_SM_2015D_topup
;type= BDT
;[dc:BDTscan_highpt100_200]
;var = ZllBDT_highVpt_100_200.nominal
;wsVarName = _BDT_highpt_preliminary_13TeV
;range = <!LimitGeneral|BDTrange!>
;dcName = BDT_highpt_Scan100_200
;cut = ZllBDThighVptcut_v2
;signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
;dcBin = _BDT_highpt_preliminary_13TeV
;data = data_SM_2015D_topup
;type= BDT
;[dc:BDTscan_highpt150_200]
;var = ZllBDT_highVpt_150_200.nominal
;wsVarName = _BDT_highpt_preliminary_13TeV
;range = <!LimitGeneral|BDTrange!>
;dcName = BDT_highpt_Scan150_200
;cut = ZllBDThighVptcut_v2
;signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
;dcBin = _BDT_highpt_preliminary_13TeV
;data = data_SM_2015D_topup
;type= BDT
;[dc:BDTscan_highpt200_200]
;var = ZllBDT_highVpt_200_200.nominal
;wsVarName = _BDT_highpt_preliminary_13TeV
;range = <!LimitGeneral|BDTrange!>
;dcName = BDT_highpt_Scan200_200
;cut = ZllBDThighVptcut_v2
;signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
;dcBin = _BDT_highpt_preliminary_13TeV
;data = data_SM_2015D_topup
;type= BDT
;[dc:BDTscan_highpt250_200]
;var = ZllBDT_highVpt_250_200.nominal
;wsVarName = _BDT_highpt_preliminary_13TeV
;range = <!LimitGeneral|BDTrange!>
;dcName = BDT_highpt_Scan250_200
;cut = ZllBDThighVptcut_v2
;signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
;dcBin = _BDT_highpt_preliminary_13TeV
;data = data_SM_2015D_topup
;type= BDT
;[dc:BDTscan_highpt300_200]
;var = ZllBDT_highVpt_300_200.nominal
;wsVarName = _BDT_highpt_preliminary_13TeV
;range = <!LimitGeneral|BDTrange!>
;dcName = BDT_highpt_Scan300_200
;cut = ZllBDThighVptcut_v2
;signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
;dcBin = _BDT_highpt_preliminary_13TeV
;data = data_SM_2015D_topup
;type= BDT
;[dc:BDTscan_highpt400_200]
;var = ZllBDT_highVpt_400_200.nominal
;wsVarName = _BDT_highpt_preliminary_13TeV
;range = <!LimitGeneral|BDTrange!>
;dcName = BDT_highpt_Scan400_200
;cut = ZllBDThighVptcut_v2
;signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
;dcBin = _BDT_highpt_preliminary_13TeV
;data = data_SM_2015D_topup
;type= BDT
;[dc:BDTscan_highpt100_300]
;var = ZllBDT_highVpt_100_300.nominal
;wsVarName = _BDT_highpt_preliminary_13TeV
;range = <!LimitGeneral|BDTrange!>
;dcName = BDT_highpt_Scan100_300
;cut = ZllBDThighVptcut_v2
;signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
;dcBin = _BDT_highpt_preliminary_13TeV
;data = data_SM_2015D_topup
;type= BDT
;[dc:BDTscan_highpt150_300]
;var = ZllBDT_highVpt_150_300.nominal
;wsVarName = _BDT_highpt_preliminary_13TeV
;range = <!LimitGeneral|BDTrange!>
;dcName = BDT_highpt_Scan150_300
;cut = ZllBDThighVptcut_v2
;signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
;dcBin = _BDT_highpt_preliminary_13TeV
;data = data_SM_2015D_topup
;type= BDT
;[dc:BDTscan_highpt200_300]
;var = ZllBDT_highVpt_200_300.nominal
;wsVarName = _BDT_highpt_preliminary_13TeV
;range = <!LimitGeneral|BDTrange!>
;dcName = BDT_highpt_Scan200_300
;cut = ZllBDThighVptcut_v2
;signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
;dcBin = _BDT_highpt_preliminary_13TeV
;data = data_SM_2015D_topup
;type= BDT
;[dc:BDTscan_highpt250_300]
;var = ZllBDT_highVpt_250_300.nominal
;wsVarName = _BDT_highpt_preliminary_13TeV
;range = <!LimitGeneral|BDTrange!>
;dcName = BDT_highpt_Scan250_300
;cut = ZllBDThighVptcut_v2
;signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
;dcBin = _BDT_highpt_preliminary_13TeV
;data = data_SM_2015D_topup
;type= BDT
;[dc:BDTscan_highpt300_300]
;var = ZllBDT_highVpt_300_300.nominal
;wsVarName = _BDT_highpt_preliminary_13TeV
;range = <!LimitGeneral|BDTrange!>
;dcName = BDT_highpt_Scan300_300
;cut = ZllBDThighVptcut_v2
;signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
;dcBin = _BDT_highpt_preliminary_13TeV
;data = data_SM_2015D_topup
;type= BDT
;[dc:BDTscan_highpt400_300]
;var = ZllBDT_highVpt_400_300.nominal
;wsVarName = _BDT_highpt_preliminary_13TeV
;range = <!LimitGeneral|BDTrange!>
;dcName = BDT_highpt_Scan400_300
;cut = ZllBDThighVptcut_v2
;signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
;dcBin = _BDT_highpt_preliminary_13TeV
;data = data_SM_2015D_topup
;type= BDT
;
;;_*_*_*_*_*_*_*_*_*_*_*
;;OTHER
;;_*_*_*_*_*_*_*_*_*_*_*
;
;[dc:CRZlight_incl_BeforeSys]
;var = Jet_btagCSV[hJCidx[1]]
;wsVarName = _ZllHbb_CRZlight_incl_13TeV
;range = <!LimitGeneral|btagrange!>
;dcName = BDT_M125_ZllHbb_CRZlight_incl_13TeV
;cut = CRZlight_incl
;signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
;dcBin = CRZlight_incl_13TeV
;data = data_2015D
;type= Mjj
;
;[dc:BDT_preliminary]
;var = nominal
;wsVarName = _BDT_preliminary_13TeV
;range = <!LimitGeneral|BDTrange!>
;dcName = BDT_M125_ZllHbb_CRZlight_incl_13TeV
;cut = SignalBDT_highpt
;signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
;dcBin = _BDT_preliminary_13TeV
;data = data_2015D
;type= Mjj
;
;[dc:BDT_lowpt_preliminary]
;var = nominal
;wsVarName = _BDT_lowpt_preliminary_13TeV
;range = <!LimitGeneral|BDTrange!>
;dcName = BDT_lowpt_M125_ZllHbb_CRZlight_incl_13TeV
;cut = SignalBDT_lowpt
;signal = ZH_HToBB_ZToLL_M125_pow ggZH_HToBB_ZToLL_M125_pow
;dcBin = _BDT_lowpt_preliminary_13TeV
;data = data_2015D
;type= Mjj
;
;#TEST
;[dc:TEST]
;var =  HCSVmass
;wsVarName = <!LimitGeneral|BDToutname!>
;#range = <!LimitGeneral|BDTrange!>
;range = <!LimitGeneral|HMassRange!>
;#The dc name contains info on the Pt region used to set the right systematics (lnN). See "Assign Pt region for sys factors" in workspace_datacard.py
;dcName = test
;#name of the cuts as defined in the cuts config file
;cut = TEST
;#Signal sample
;signal = ZH_HToBB_ZToLL_M125_powheg_pythia8
;dcBin = ZeeLowPt_8TeV
;data = ZH_HToBB_DATA
;# Three type possible: BDT, Mjj or cr. This will choose the right systematics
;type= BDT
[Plot_general]


#!!_*_*_*_*_*_*_*_*_
#General Settings
#!!_*_*_*_*_*_*_*_*_

#luminosity. Not used at the plotting step
lumi = 3000.

;#!!_*_*_*_*_*_
;#Data Samples
;#!!_*_*_*_*_*_

;Put Data: in order to remove data points from the plot
Data: ['data_SM_Run2015C_25ns_16Dec2015','data_SM_Run2015D-16Dec2015']
;Data: []

;#!!_*_*_*_*_*_
;#MC Samples
;#!!_*_*_*_*_*_


;#!!_*_*_*_*_*_
;#Drell-Yan
;#!!_*_*_*_*_*_

;inclusive sample
DYincl: 'ZJets_udscg','ZJets_1b','ZJets_2b'
;inclusive no spliting
DYinclnosplit: 'DYJets'
;stHT binned
DYHT:'HT100to200ZJets_udscg','HT100to200ZJets_1b','HT100to200ZJets_2b','HT200to400ZJets_udscg','HT200to400ZJets_1b','HT200to400ZJets_2b','HT400to600ZJets_udscg','HT400to600ZJets_1b','HT400to600ZJets_2b','HT600toInfZJets_udscg','HT600toInfZJets_1b','HT600toInfZJets_2b'
;inclusive HT<100
DYinclHT0to100: 'HT0to100ZJets_udscg','HT0to100ZJets_1b','HT0to100ZJets_2b'
;inclusive HT>100
DYinclHT100toInf: 'HT100toInfZJets_udscg','HT100toInfZJets_1b','HT100toInfZJets_2b'
;stiched sample
DYinclHT: <!Plot_general|DYHT!>,<!Plot_general|DYinclHT0to100!>
;amc@nlo
DYnlo: 'ZJets_amc_udscg','ZJets_amc_1b','ZJets_amc_2b'

;DY: <!Plot_general|DYnlo!>
DY: <!Plot_general|DYinclHT!>

;#!!_*_*_*_*_*_
;#Single-top
;#!!_*_*_*_*_*_

;ST: 'ST_s','ST_tW_antitop','ST_tW_top'
ST: 'ST_s','ST_t','ST_tW_antitop','ST_tW_top'

;#!!_*_*_*_*_*_
;#TTbar
;#!!_*_*_*_*_*_
;TT: 'TT_pow'
TT: 'TT_mad'

;#!!_*_*_*_*_*_
;#DiBoson
;#!!_*_*_*_*_*_

WW: 'WWpythia_udscg','WWpythia_1b','WWpythia_2b'
WZ: 'WZpythia_udscg','WZpythia_1b','WZpythia_2b'
ZZ: 'ZZpythia_udscg','ZZpythia_1b','ZZpythia_2b'

;#!!_*_*_*_*_*_
;#QCD
;#!!_*_*_*_*_*_

QCDHT: 'QCD_HT1000to1500_TuneCUETP8M1','QCD_HT100to200_TuneCUETP8M1','QCD_HT1500to2000_TuneCUETP8M1','QCD_HT2000toInf_TuneCUETP8M1','QCD_HT200to300_TuneCUETP8M1','QCD_HT500to700_TuneCUETP8M1','QCD_HT700to1000_TuneCUETP8M1'

;#!!_*_*_*_*_*_
;#Signal
;#!!_*_*_*_*_*_

#!! Signal MC Samples to be used for the plotting.
;allSIG: 'ZH_HToBB_ZToLL_M125_pow','ggZH_HToBB_ZToLL_M125_pow'
allSIG:
#!! Signal
plot_mass:

;#!!_*_*_*_*_*_
;#Background
;#!!_*_*_*_*_*_

;#!! BKG MC Samples to be used for the plotting.
allBKG: <!Plot_general|DY!>,<!Plot_general|ST!>,<!Plot_general|TT!>,<!Plot_general|WW!>,<!Plot_general|WZ!>,<!Plot_general|ZZ!>
;allBKG: <!Plot_general|ST!>,<!Plot_general|TT!>,<!Plot_general|WW!>,<!Plot_general|WZ!>,<!Plot_general|ZZ!>

;#!!_*_*_*_*_*_
;#Final MC samples
;#!!_*_*_*_*_*_

;#!! MC Samples to be used in the ploting step
samples: [<!Plot_general|allBKG!>,<!Plot_general|allSIG!>]

#!!_*_*_*_*_*_
#Group
#!!_*_*_*_*_*_

#!! Groups for adding samples together and for the legend {'sampleName':'sampleGroup',...}.Need to put data as well
Group: {
    'DYJets':'DYJets',\
    'ZJets_udscg':'Z_udscg','ZJets_1b':'Zb','ZJets_2b':'Zbb',\
    'HT100to200ZJets_udscg':'Z_udscg','HT100to200ZJets_1b':'Zb','HT100to200ZJets_2b':'Zbb','HT200to400ZJets_udscg':'Z_udscg','HT200to400ZJets_1b':'Zb','HT200to400ZJets_2b':'Zbb','HT400to600ZJets_udscg':'Z_udscg','HT400to600ZJets_1b':'Zb','HT400to600ZJets_2b':'Zbb','HT600toInfZJets_udscg':'Z_udscg','HT600toInfZJets_1b':'Zb','HT600toInfZJets_2b':'Zbb',\
;    'HT100to200ZJets_udscg':'HT100to200','HT100to200ZJets_1b':'HT100to200','HT100to200ZJets_2b':'HT100to200','HT200to400ZJets_udscg':'HT200to400','HT200to400ZJets_1b':'HT200to400','HT200to400ZJets_2b':'HT200to400','HT400to600ZJets_udscg':'HT400to600','HT400to600ZJets_1b':'HT400to600','HT400to600ZJets_2b':'HT400to600','HT600toInfZJets_udscg':'HT600toInf','HT600toInfZJets_1b':'HT600toInf','HT600toInfZJets_2b':'HT600toInf',\
    'HT0to100ZJets_udscg':'Z_udscg','HT0to100ZJets_1b':'Zb','HT0to100ZJets_2b':'Zbb',\
    'HT100toInfZJets_udscg':'Z_udscg','HT100toInfZJets_1b':'Zb','HT100toInfZJets_2b':'Zbb',\
;    'ZJetsMadHT100_light':'Zlight','ZJetsMadHT100_c':'Zc','ZJetsMadHT100_1b':'Zb','ZJetsMadHT100_2b':'Zbb','ZJetsMadHT200_light':'Zlight','ZJetsMadHT200_c':'Zc','ZJetsMadHT200_1b':'Zb','ZJetsMadHT200_2b':'Zbb','ZJetsMadHT400_light':'Zlight','ZJetsMadHT400_c':'Zc','ZJetsMadHT400_1b':'Zb','ZJetsMadHT400_2b':'Zbb','ZJetsMadHT600_light':'Zlight','ZJetsMadHT600_c':'Zc','ZJetsMadHT600_1b':'Zb','ZJetsMadHT600_2b':'Zbb',\
;DYnlo
    'ZJets_amc_udscg':'Z_udscg','ZJets_amc_1b':'Zb','ZJets_amc_2b':'Zbb',\
    'ZH_HToBB_ZToLL_M125_pow':'ZHbb','ggZH_HToBB_ZToLL_M125_pow':'ZHbb',\
    'ST_s':'ST','ST_t':'ST','ST_tW_antitop':'ST','ST_tW_top':'ST',\
    'TT_mad':'TT','TT_pow':'TT',\
    'WJetsMad_light':'WJets','WJetsMad_c':'WJets','WJetsMad_1b':'WJets','WJetsMad_2b':'WJets',\
    'WZpythia_udscg':'VVlight','WZJets_TuneCUETP8M1':'DiBoson','WWpythia_udscg':'VVlight','WWpythia_c':'DiBoson','WWpythia_1b':'VVb','WZpythia_1b':'VVb','WWpythia_2b':'VV2b','WZpythia_2b':'VV2b','WZpythia_light':'VVlight','WZpythia_c':'DiBoson','WZpythia_1b':'VVb','WZpythia_2b':'VV2b','ZZpythia_udscg':'VVlight','ZZpythia_c':'DiBoson','ZZpythia_1b':'VVb','ZZpythia_2b':'VV2b',\
    'WZpythia_udscg':'VVlight','WZJets_TuneCUETP8M1':'DiBoson','WWpythia_udscg':'VVlight','WWpythia_c':'DiBoson','WWpythia_1b':'VVb','WZpythia_1b':'VVb','WWpythia_2b':'VV2b','WZpythia_2b':'VV2b','WZpythia_light':'VVlight','WZpythia_c':'DiBoson','WZpythia_1b':'VVb','WZpythia_2b':'VV2b','ZZpythia_udscg':'VVlight','ZZpythia_c':'DiBoson','ZZpythia_1b':'VVb','ZZpythia_2b':'VV2b',\
    'QCD_HT1000to1500_TuneCUETP8M1':'QCD','QCD_HT100to200_TuneCUETP8M1':'QCD','QCD_HT1500to2000_TuneCUETP8M1':'QCD','QCD_HT2000toInf_TuneCUETP8M1':'QCD','QCD_HT200to300_TuneCUETP8M1':'QCD', 'QCD_HT300to500_TuneCUETP8M1':'QCD','QCD_HT500to700_TuneCUETP8M1':'QCD','QCD_HT700to1000_TuneCUETP8M1':'QCD','QCD_Pt-15to20_MuEnrichedPt5_TuneCUETP8M1':'QCDMuEnr','QCD_Pt-20to30_MuEnrichedPt5_TuneCUETP8M1':'QCDMuEnr','QCD_Pt-30to50_MuEnrichedPt5_TuneCUETP8M1':'QCDMuEnr','QCD_Pt-50to80_MuEnrichedPt5_TuneCUETP8M1':'QCDMuEnr','QCD_Pt-80to120_MuEnrichedPt5_TuneCUETP8M1':'QCDMuEnr','QCD_Pt-120to170_MuEnrichedPt5_TuneCUETP8M1':'QCDMuEnr','QCD_Pt-170to300_MuEnrichedPt5_TuneCUETP8M1':'QCDMuEnr','QCD_Pt-300to470_MuEnrichedPt5_TuneCUETP8M1':'QCDMuEnr','QCD_Pt-470to600_MuEnrichedPt5_TuneCUETP8M1':'QCDMuEnr','QCD_Pt-600to800_MuEnrichedPt5_TuneCUETP8M1':'QCDMuEnr','QCD_Pt-800to1000_MuEnrichedPt5_TuneCUETP8M1':'QCDMuEnr','QCD_Pt-1000toInf_MuEnrichedPt5_TuneCUETP8M1':'QCDMuEnr','QCD_Pt-15to20_EMEnriched_TuneCUETP8M1':'QCDEMEnr','QCD_Pt-20to30_EMEnriched_TuneCUETP8M1':'QCDEMEnr','QCD_Pt-30to50_EMEnriched_TuneCUETP8M1':'QCDEMEnr','QCD_Pt-50to80_EMEnriched_TuneCUETP8M1':'QCDEMEnr','QCD_Pt-80to120_EMEnriched_TuneCUETP8M1':'QCDEMEnr','QCD_Pt-120to170_EMEnriched_TuneCUETP8M1':'QCDEMEnr','QCD_Pt-170to300_EMEnriched_TuneCUETP8M1':'QCDEMEnr','QCD_Pt-20toInf_MuEnrichedPt15_TuneCUETP8M1':'QCDMuEnrPt15',\
;V14
;    'data_SM_2015D_1280lumi':'DATA','data_2015D':'DATA','data_SM_2015C':'DATA','data_SM_2015D':'DATA','data_SM_2015D_topup':'DATA',\
;V20
    'data_SM_Run2015C_25ns_16Dec2015':'DATA','data_SM_Run2015D-16Dec2015':'DATA',\
    'allBKG':'BKG1'}

;Group used for dc step. Separated from the "ploting group" (above) because need to merge the VVb+VVbb
Group_dc: {
    'DYJets':'DYJets',\
    'ZJets_udscg':'Z_udscg','ZJets_1b':'Zb','ZJets_2b':'Zbb',\
    'HT100to200ZJets_udscg':'Z_udscg','HT100to200ZJets_1b':'Zb','HT100to200ZJets_2b':'Zbb','HT200to400ZJets_udscg':'Z_udscg','HT200to400ZJets_1b':'Zb','HT200to400ZJets_2b':'Zbb','HT400to600ZJets_udscg':'Z_udscg','HT400to600ZJets_1b':'Zb','HT400to600ZJets_2b':'Zbb','HT600toInfZJets_udscg':'Z_udscg','HT600toInfZJets_1b':'Zb','HT600toInfZJets_2b':'Zbb',\
;    'HT100to200ZJets_udscg':'HT100to200','HT100to200ZJets_1b':'HT100to200','HT100to200ZJets_2b':'HT100to200','HT200to400ZJets_udscg':'HT200to400','HT200to400ZJets_1b':'HT200to400','HT200to400ZJets_2b':'HT200to400','HT400to600ZJets_udscg':'HT400to600','HT400to600ZJets_1b':'HT400to600','HT400to600ZJets_2b':'HT400to600','HT600toInfZJets_udscg':'HT600toInf','HT600toInfZJets_1b':'HT600toInf','HT600toInfZJets_2b':'HT600toInf',\
    'HT0to100ZJets_udscg':'Z_udscg','HT0to100ZJets_1b':'Zb','HT0to100ZJets_2b':'Zbb',\
    'HT100toInfZJets_udscg':'Z_udscg','HT100toInfZJets_1b':'Zb','HT100toInfZJets_2b':'Zbb',\
;    'ZJetsMadHT100_light':'Zlight','ZJetsMadHT100_c':'Zc','ZJetsMadHT100_1b':'Zb','ZJetsMadHT100_2b':'Zbb','ZJetsMadHT200_light':'Zlight','ZJetsMadHT200_c':'Zc','ZJetsMadHT200_1b':'Zb','ZJetsMadHT200_2b':'Zbb','ZJetsMadHT400_light':'Zlight','ZJetsMadHT400_c':'Zc','ZJetsMadHT400_1b':'Zb','ZJetsMadHT400_2b':'Zbb','ZJetsMadHT600_light':'Zlight','ZJetsMadHT600_c':'Zc','ZJetsMadHT600_1b':'Zb','ZJetsMadHT600_2b':'Zbb',\
;DYnlo
    'ZJets_amc_udscg':'Z_udscg','ZJets_amc_1b':'Zb','ZJets_amc_2b':'Zbb',\
    'ZH_HToBB_ZToLL_M125_pow':'ZHbb','ggZH_HToBB_ZToLL_M125_pow':'ggZHbb',\
    'ST_s':'ST','ST_t':'ST','ST_tW_antitop':'ST','ST_tW_top':'ST',\
    'TT_mad':'TT','TT_pow':'TT',\
    'WJetsMad_light':'WJets','WJetsMad_c':'WJets','WJetsMad_1b':'WJets','WJetsMad_2b':'WJets',\
    'WZpythia_udscg':'VVlight','WZJets_TuneCUETP8M1':'DiBoson','WWpythia_udscg':'VVlight','WWpythia_c':'DiBoson','WWpythia_1b':'VVHF','WZpythia_1b':'VVHF','WWpythia_2b':'VVHF','WZpythia_2b':'VVHF','WZpythia_light':'VVlight','WZpythia_c':'DiBoson','WZpythia_1b':'VVHF','WZpythia_2b':'VVHF','ZZpythia_udscg':'VVlight','ZZpythia_c':'DiBoson','ZZpythia_1b':'VVHF','ZZpythia_2b':'VVHF',\
    'WZpythia_udscg':'VVlight','WZJets_TuneCUETP8M1':'DiBoson','WWpythia_udscg':'VVlight','WWpythia_c':'DiBoson','WWpythia_1b':'VVHF','WZpythia_1b':'VVHF','WWpythia_2b':'VVHF','WZpythia_2b':'VVHF','WZpythia_light':'VVlight','WZpythia_c':'DiBoson','WZpythia_1b':'VVHF','WZpythia_2b':'VVHF','ZZpythia_udscg':'VVlight','ZZpythia_c':'DiBoson','ZZpythia_1b':'VVHF','ZZpythia_2b':'VVHF',\
    'QCD_HT1000to1500_TuneCUETP8M1':'QCD','QCD_HT100to200_TuneCUETP8M1':'QCD','QCD_HT1500to2000_TuneCUETP8M1':'QCD','QCD_HT2000toInf_TuneCUETP8M1':'QCD','QCD_HT200to300_TuneCUETP8M1':'QCD', 'QCD_HT300to500_TuneCUETP8M1':'QCD','QCD_HT500to700_TuneCUETP8M1':'QCD','QCD_HT700to1000_TuneCUETP8M1':'QCD','QCD_Pt-15to20_MuEnrichedPt5_TuneCUETP8M1':'QCDMuEnr','QCD_Pt-20to30_MuEnrichedPt5_TuneCUETP8M1':'QCDMuEnr','QCD_Pt-30to50_MuEnrichedPt5_TuneCUETP8M1':'QCDMuEnr','QCD_Pt-50to80_MuEnrichedPt5_TuneCUETP8M1':'QCDMuEnr','QCD_Pt-80to120_MuEnrichedPt5_TuneCUETP8M1':'QCDMuEnr','QCD_Pt-120to170_MuEnrichedPt5_TuneCUETP8M1':'QCDMuEnr','QCD_Pt-170to300_MuEnrichedPt5_TuneCUETP8M1':'QCDMuEnr','QCD_Pt-300to470_MuEnrichedPt5_TuneCUETP8M1':'QCDMuEnr','QCD_Pt-470to600_MuEnrichedPt5_TuneCUETP8M1':'QCDMuEnr','QCD_Pt-600to800_MuEnrichedPt5_TuneCUETP8M1':'QCDMuEnr','QCD_Pt-800to1000_MuEnrichedPt5_TuneCUETP8M1':'QCDMuEnr','QCD_Pt-1000toInf_MuEnrichedPt5_TuneCUETP8M1':'QCDMuEnr','QCD_Pt-15to20_EMEnriched_TuneCUETP8M1':'QCDEMEnr','QCD_Pt-20to30_EMEnriched_TuneCUETP8M1':'QCDEMEnr','QCD_Pt-30to50_EMEnriched_TuneCUETP8M1':'QCDEMEnr','QCD_Pt-50to80_EMEnriched_TuneCUETP8M1':'QCDEMEnr','QCD_Pt-80to120_EMEnriched_TuneCUETP8M1':'QCDEMEnr','QCD_Pt-120to170_EMEnriched_TuneCUETP8M1':'QCDEMEnr','QCD_Pt-170to300_EMEnriched_TuneCUETP8M1':'QCDEMEnr','QCD_Pt-20toInf_MuEnrichedPt15_TuneCUETP8M1':'QCDMuEnrPt15',\
    'data_SM_2015D_1280lumi':'DATA','data_2015D':'DATA','data_SM_2015C':'DATA','data_SM_2015D':'DATA','data_SM_2015D_topup':'DATA',\
    'allBKG':'BKG1'}

;#!! Here the order and the groups that will go in the plots.
;setup: ZHbb,Z_udscg,Zb,Zbb,TT,VVlight,VVb,VV2b,ST
;setupLog: ZHbb,Z_udscg,Zb,Zbb,TT,VVlight,VVb,VV2b,ST
setup: Z_udscg,Zb,Zbb,TT,VVlight,VVb,VV2b,ST
setupLog: Z_udscg,Zb,Zbb,TT,VVlight,VVb,VV2b,ST

#!! Colors dictionary and legend
colorDict: {
    'DYJets':401,'ZJets':400,'QCD':613,'Z_udscg':401,'Zlight':401,'Zcc':400-3,'Zc':400-3,'Zb':41,'Zbb':5,'ST':840,'TT':596,'WJets':820,'WJetslight':820-6,'WJetsc':820-5,'WJetsb':820-1,'WJetsbb':820,'VVlight':920+3,'VVb':920+2,'VV2b':920+1,'DiBoson':920,'ZHbb':632,'QCDMuEnr':922,'QCDEMEnr':920,'QCDMuEnrPt15':18,\
    'HT100to200':630,'HT200to400':630-1,'HT400to600':630-2,'HT600toInf':630-3,\
    'BKG':596}
#Group to the left
typLegendDict: {
    'DYJets':'Z+Jets','QCD':'QCD','Z_udscg':'Z+udscg','Zlight':'Z+udscg','Zcc':'Z+c#bar{c}','Zc':'Z+c#bar{c}','Zb':'Z+b','Zbb':'Z+b#bar{b}','ST':'Single top','TT':'t#bar{t}','WJets':'W+jets','WJetslight':'W+jets','WJetsc':'W+jets','WJetsb':'W+jets','WJetsbb':'W+jets','VVlight':'VV+udscg','VVb':'VV+b','VV2b':'VV+b#bar{b}','DiBoson':'VV','ZHbb':'ZH','QCDMuEnr':'QCD muon enr.','QCDEMEnr':'QCD EM enr. p_{T} 5','QCDMuEnrPt15':'QCD Mu enr. p_{T} 15',\
    'HT100to200':'DY HT100to200','HT200to400':'DY HT200to400','HT400to600':'DY HT400to600','HT600toInf':'DY HT600toInf',\
    'BKG':'Bkg'}

#!!_*_*_*_*_*_
#Plot Regions and variables
#!!_*_*_*_*_*_

#!! Do NOT put any space in the list, otherwise the parsing won't work
;List: CRZlight,CRZb,CRttbar,SignalMjjRun1_lowpt,SignalMjjRun1_mediumpt,SignalMjjRun1_highpt
;List: SignalMjjRun1_lowpt,SignalMjjRun1_mediumpt,SignalMjjRun1_highpt
;List: CRZlight,CRZb,CRttbar
;List: CRZb,SignalMjjRun1_lowpt
;List: CRZlight_incl,CRZb_incl,CRttbar_incl,CRZlight_lowVpt,CRZb_lowVpt,CRttbar_lowVpt,CRZlight_medVpt,CRZb_medVpt,CRttbar_medVpt,CRZlight_highVpt,CRZb_highVpt,CRttbar_highVpt
;hf only
;List: CRZb_incl ;,CRZb_lowVpt,CRZb_medVpt,CRZb_highVpt
;List: CRttbar_incl
;List: CRZlight_incl,CRZb_incl,CRttbar_incl
;List: CRZlight_incl,CRZb_incl,CRttbar_incl
;List: CRZlight_incl,CRZb_incl
;List: CRZlight_incl,CRZlight_lowVpt,CRZlight_medVpt,CRZlight_highVpt
;List: SignalBDT_highpt
;List: SignalBDT_lowpt
;List: CRZlight_incl,CRZlight_lowVpt,CRZlight_medVpt,CRZlight_highVpt
;List: CRZlight_noHT
;List: CRZlight_noHT,CRZlight_noHT_medpt
;List: CRZlight_incl_noHT
;List:CRttbar_incl_noCSV,CRttbar_incl
;List: CRZlight_lowVpt
;List: CRZlight
;List: CRZb_incl



;_*_*_*_*_*_*_*_*_*_*_*
;CR plots
;_*_*_*_*_*_*_*_*_*_*_*

List: CRZlight,CRZb_incl,CRttbar_incl,CRZlight_incl,
;List: CRZlight,CRZb_incl,CRttbar_incl
;List: CRZlight_incl
;,SignalBDT_lowpt,SignalBDT_highpt
;List: CRZb_incl
;List: CRZlight

;For studies
;List: CRZlight0addj,CRZlightkaddj

;_*_*_*_*_*_*_*_*_*_*_*
;SR plots
;_*_*_*_*_*_*_*_*_*_*_*


#!! Variables definition.
#Do not put any space, otherwise the parsing doesn't work.

;!!_*_*_*_*_*_
;For CR
;!!_*_*_*_*_*_

;for test
;var: Lepton1_eta

var: Vpt,Veta,Vphi,Vm,HCSVmass,HCSVpt,HCSVeta,HCSVphi,VHCSV_Dphi,HCSVptbalance,HCSVregmass,HCSVregpt,HCSVregeta,HCSVregphi,HCSVregptbalance,HjCSV0_pt,HjCSV1_pt,HjCSV0_eta,HjCSV1_eta,HjCSV0_CSV,HjCSV1_CSV,Rbb,Etabb,htJet30,MET,METphi,nVertices,Lepton0_pt,Lepton1_pt,Lepton0_reliso4,Lepton1_reliso4,Lepton0_eta,Lepton1_eta,Leptonmax_relio4,Leptonmin_relio4,softAct10,softAct2,softAct5,softActHT,HT,CSV3,Phibb,EWK_weight,NJets20,NJets30,bTag_weight,Vm_ttbar
;,ZllBDT_lowVpt,ZllBDT_highVpt
;var: bTag_weight
;var: varttCls

;not working
;VHpt

;!!_*_*_*_*_*_
;For BDT scan
;!!_*_*_*_*_*_

;var: BDTlow100_100,BDTlow150_100,BDTlow200_100,BDTlow250_100,BDTlow300_100,BDTlow400_100,BDTlow100_200,BDTlow150_200,BDTlow200_200,BDTlow250_200,BDTlow300_200,BDTlow400_200,BDTlow100_300,BDTlow150_300,BDTlow200_300,BDTlow250_300,BDTlow300_300,BDTlow400_300
;var: BDThigh100_100,BDThigh150_100,BDThigh200_100,BDThigh250_100,BDThigh300_100,BDThigh400_100,BDThigh100_200,BDThigh150_200,BDThigh200_200,BDThigh250_200,BDThigh300_200,BDThigh400_200,BDThigh100_300,BDThigh150_300,BDThigh200_300,BDThigh250_300,BDThigh300_300,BDThigh400_300

;var:BDTlow100_200
;var:ZllBDT_highVpt_150_300
;var:ZllBDT_lowVpt
;var:ZllBDT_highVpt
;var:ZllBDT_lowVpt,ZllBDT_highVpt

#!!_*_*_*_*_*_
#Other Options
#!!_*_*_*_*_*_

#!! Add overflow bin in the plots
addOverFlow = False
Normalize = False

;#!!_*_*_*_*_*_*_
;#Control Regions
;#!!_*_*_*_*_*_*_

;TEST

[Plot:CRZlight0addj]
##!! which data to compare to
Datas: <!Plot_general|Data!>
Normalize: <!Plot_general|Normalize!>
vars: <!Plot_general|var!>
#!! log scale
log: False
#!! apply blinding cut
blind: False

[Plot:CRZlightkaddj]
##!! which data to compare to
Datas: <!Plot_general|Data!>
Normalize: <!Plot_general|Normalize!>
vars: <!Plot_general|var!>
#!! log scale
log: False
#!! apply blinding cut
blind: False

;Inclusive

[Plot:CRZlight_incl]
##!! which data to compare to
Datas: <!Plot_general|Data!>
Normalize: <!Plot_general|Normalize!>
vars: <!Plot_general|var!>
#!! log scale
log: False
#!! apply blinding cut
blind: False

[Plot:CRZb_incl]
##!! which data to compare to
Datas: <!Plot_general|Data!>
Normalize: <!Plot_general|Normalize!>
vars: <!Plot_general|var!>
#!! log scale
log: False
#!! apply blinding cut
blind: False

[Plot:CRttbar_incl]
##!! which data to compare to
Datas: <!Plot_general|Data!>
Normalize: <!Plot_general|Normalize!>
vars: <!Plot_general|var!>
#!! log scale
log: False
#!! apply blinding cut
blind: False

;without CSV cuts (for bTag weight studies)
[Plot:CRttbar_incl_noCSV]
##!! which data to compare to
Datas: <!Plot_general|Data!>
Normalize: <!Plot_general|Normalize!>
vars: <!Plot_general|var!>
#!! log scale
log: False
#!! apply blinding cut
blind: False

;CR definiton. Here are the region following the current CR definition, when this is not arealady included by the inclusive case (pt binned)
[Plot:CRZlight]
##!! which data to compare to
Datas: <!Plot_general|Data!>
Normalize: <!Plot_general|Normalize!>
vars: <!Plot_general|var!>
#!! log scale
log: False
#!! apply blinding cut
blind: False

;no HT, no pT
[Plot:CRZlight_incl_noHT]
##!! which data to compare to
Datas: <!Plot_general|Data!>
Normalize: <!Plot_general|Normalize!>
vars: <!Plot_general|var!>
#!! log scale
log: False
#!! apply blinding cut
blind: False

;no Hpt, Vpt > 100
[Plot:CRZlight_noHT]
##!! which data to compare to
Datas: <!Plot_general|Data!>
Normalize: <!Plot_general|Normalize!>
vars: <!Plot_general|var!>
#!! log scale
log: False
#!! apply blinding cut
blind: False

;no Hpt, 100 > Vpt > 50
[Plot:CRZlight_noHT_medpt]
##!! which data to compare to
Datas: <!Plot_general|Data!>
Normalize: <!Plot_general|Normalize!>
vars: <!Plot_general|var!>
#!! log scale
log: False
#!! apply blinding cut
blind: False

;Low Vpt
[Plot:CRZlight_lowVpt]
##!! which data to compare to
Datas: <!Plot_general|Data!>
Normalize: <!Plot_general|Normalize!>
vars: <!Plot_general|var!>
#!! log scale
log: False
#!! apply blinding cut
blind: False

[Plot:CRZb_lowVpt]
##!! which data to compare to
Datas: <!Plot_general|Data!>
Normalize: <!Plot_general|Normalize!>
vars: <!Plot_general|var!>
#!! log scale
log: False
#!! apply blinding cut
blind: False

[Plot:CRttbar_lowVpt]
##!! which data to compare to
Datas: <!Plot_general|Data!>
Normalize: <!Plot_general|Normalize!>
vars: <!Plot_general|var!>
#!! log scale
log: False
#!! apply blinding cut
blind: False

;Med Vpt

[Plot:CRZlight_medVpt]
##!! which data to compare to
Datas: <!Plot_general|Data!>
Normalize: <!Plot_general|Normalize!>
vars: <!Plot_general|var!>
#!! log scale
log: False
#!! apply blinding cut
blind: False

[Plot:CRZb_medVpt]
##!! which data to compare to
Datas: <!Plot_general|Data!>
Normalize: <!Plot_general|Normalize!>
vars: <!Plot_general|var!>
#!! log scale
log: False
#!! apply blinding cut
blind: False

[Plot:CRttbar_medVpt]
##!! which data to compare to
Datas: <!Plot_general|Data!>
Normalize: <!Plot_general|Normalize!>
vars: <!Plot_general|var!>
#!! log scale
log: False
#!! apply blinding cut
blind: False

;High Vpt

[Plot:CRZlight_highVpt]
##!! which data to compare to
Datas: <!Plot_general|Data!>
Normalize: <!Plot_general|Normalize!>
vars: <!Plot_general|var!>
#!! log scale
log: False
#!! apply blinding cut
blind: False

[Plot:CRZb_highVpt]
##!! which data to compare to
Datas: <!Plot_general|Data!>
Normalize: <!Plot_general|Normalize!>
vars: <!Plot_general|var!>
#!! log scale
log: False
#!! apply blinding cut
blind: False

[Plot:CRttbar_highVpt]
##!! which data to compare to
Datas: <!Plot_general|Data!>
Normalize: <!Plot_general|Normalize!>
vars: <!Plot_general|var!>
#!! log scale
log: False
#!! apply blinding cut
blind: False


;#!!_*_*_*_*_*_
;# Run 1 mjj SIGNAL REGIONS
;#!!_*_*_*_*_*_


[Plot:SignalMjjRun1_lowpt]
##!! which data to compare to
Datas: <!Plot_general|Data!>
Signal: <!Plot_general|plot_mass!>
Normalize: <!Plot_general|Normalize!>
vars: <!Plot_general|var!>
#!! log scale
log: False
#!! apply blinding cut
blind: True

[Plot:SignalMjjRun1_mediumpt]
##!! which data to compare to
Datas: <!Plot_general|Data!>
Signal: <!Plot_general|plot_mass!>
Normalize: <!Plot_general|Normalize!>
vars: <!Plot_general|var!>
#!! log scale
log: False
#!! apply blinding cut
blind: True

[Plot:SignalMjjRun1_highpt]
##!! which data to compare to
Datas: <!Plot_general|Data!>
Signal: <!Plot_general|plot_mass!>
Normalize: <!Plot_general|Normalize!>
vars: <!Plot_general|var!>
#!! log scale
log: False
#!! apply blinding cut
blind: True

;#!!_*_*_*_*_*_
;# Run 1 BDT SIGNAL REGIONS
;#!!_*_*_*_*_*_

[Plot:SignalBDT_highpt]
##!! which data to compare to
Datas: <!Plot_general|Data!>
Signal: <!Plot_general|plot_mass!>
Normalize: <!Plot_general|Normalize!>
vars: <!Plot_general|var!>
#!! log scale
log: True
#!! apply blinding cut
blind: True

[Plot:LOGSignalBDT_highpt]
##!! which data to compare to
Datas: <!Plot_general|Data!>
Normalize: <!Plot_general|Normalize!>
vars: <!Plot_general|var!>
#!! log scale
log: True
#!! apply blinding cut
blind: True

[Plot:SignalBDT_lowpt]
##!! which data to compare to
Datas: <!Plot_general|Data!>
Normalize: <!Plot_general|Normalize!>
vars: <!Plot_general|var!>
#!! log scale
log: False
#!! apply blinding cut
blind: True

[Plot:LOGSignalBDT_lowpt]
##!! which data to compare to
Datas: <!Plot_general|Data!>
Normalize: <!Plot_general|Normalize!>
vars: ;<!Plot_general|var!>
#!! log scale
log: True
#!! apply blinding cut
blind: True

[LHEWeights]
inclusive = DYJetsToLL_M-50_TuneZ2Star_8TeV-madgraph-tarball
weights_per_bin = {'lheV_pt > 100 & lheV_pt < 180 & lheNj == 3 & lheHT < 200': 0.012696185717000907, 'lheV_pt > 70 & lheV_pt < 100 & lheNj == 3 & lheHT > 400': 0.009574739669326154, 'lheV_pt > 70 & lheV_pt < 100 & lheNj == 0 & lheHT > 400': 1.0, 'lheV_pt > 100 & lheV_pt < 180 & lheNj == 3 & lheHT > 200 & lheHT < 400': 0.010438688521121271, 'lheV_pt > 100 & lheV_pt < 180 & lheNj == 4 & lheHT > 200 & lheHT < 400': 0.009335197844501264, 'lheV_pt > 70 & lheV_pt < 100 & lheNj == 1 & lheHT > 400': 1.0, 'lheV_pt < 50 & lheNj == 0 & lheHT < 200': 0.99999999999999989, 'lheV_pt > 70 & lheV_pt < 100 & lheNj == 1 & lheHT < 200': 0.12117853297844745, 'lheV_pt < 50 & lheNj == 3 & lheHT > 400': 0.0099065977264598919, 'lheV_pt > 100 & lheV_pt < 180 & lheNj == 1 & lheHT < 200': 0.01673053987981515, 'lheV_pt > 100 & lheV_pt < 180 & lheNj == 0 & lheHT > 200 & lheHT < 400': 1.0, 'lheV_pt > 50 & lheV_pt < 70 & lheNj == 1 & lheHT > 400': 1.0, 'lheV_pt > 100 & lheV_pt < 180 & lheNj == 2 & lheHT > 200 & lheHT < 400': 0.013418905127257158, 'lheV_pt > 100 & lheV_pt < 180 & lheNj == 2 & lheHT < 200': 0.017357680787825777, 'lheV_pt < 50 & lheNj == 1 & lheHT > 200 & lheHT < 400': 1.0, 'lheV_pt < 50 & lheNj == 3 & lheHT > 200 & lheHT < 400': 0.022694708907040194, 'lheV_pt > 180 & lheNj == 3 & lheHT > 400': 0.0050760737451812053, 'lheV_pt > 70 & lheV_pt < 100 & lheNj == 3 & lheHT < 200': 0.033843430659272075, 'lheV_pt > 180 & lheNj == 1 & lheHT > 400': 0.0052498091462213261, 'lheV_pt > 70 & lheV_pt < 100 & lheNj == 2 & lheHT > 200 & lheHT < 400': 0.042079364891032027, 'lheV_pt > 70 & lheV_pt < 100 & lheNj == 0 & lheHT > 200 & lheHT < 400': 1.0, 'lheV_pt > 70 & lheV_pt < 100 & lheNj == 2 & lheHT < 200': 0.16090530456949534, 'lheV_pt > 100 & lheV_pt < 180 & lheNj == 1 & lheHT > 200 & lheHT < 400': 1.0, 'lheV_pt > 180 & lheNj == 2 & lheHT > 400': 0.0055617036199656208, 'lheV_pt > 50 & lheV_pt < 70 & lheNj == 0 & lheHT > 400': 1.0, 'lheV_pt < 50 & lheNj == 1 & lheHT < 200': 0.2078183212248626, 'lheV_pt > 180 & lheNj == 1 & lheHT < 200': 0.0095937024883484493, 'lheV_pt > 180 & lheNj == 3 & lheHT > 200 & lheHT < 400': 0.0071391602448128691, 'lheV_pt > 50 & lheV_pt < 70 & lheNj == 3 & lheHT > 200 & lheHT < 400': 0.020465585745643545, 'lheV_pt > 50 & lheV_pt < 70 & lheNj == 1 & lheHT > 200 & lheHT < 400': 1.0, 'lheV_pt > 50 & lheV_pt < 70 & lheNj == 2 & lheHT > 200 & lheHT < 400': 0.040446667205017932, 'lheV_pt > 70 & lheV_pt < 100 & lheNj == 0 & lheHT < 200': 1.0, 'lheV_pt > 180 & lheNj == 4 & lheHT > 400': 0.0048066020883360296, 'lheV_pt > 180 & lheNj == 0 & lheHT > 200 & lheHT < 400': 1.0, 'lheV_pt > 70 & lheV_pt < 100 & lheNj == 4 & lheHT < 200': 0.026237167232021401, 'lheV_pt > 70 & lheV_pt < 100 & lheNj == 4 & lheHT > 200 & lheHT < 400': 0.018103102454985743, 'lheV_pt > 70 & lheV_pt < 100 & lheNj == 2 & lheHT > 400': 0.011925011978130704, 'lheV_pt > 50 & lheV_pt < 70 & lheNj == 2 & lheHT < 200': 0.1447849092131501, 'lheV_pt > 50 & lheV_pt < 70 & lheNj == 0 & lheHT > 200 & lheHT < 400': 1.0, 'lheV_pt > 180 & lheNj == 4 & lheHT > 200 & lheHT < 400': 0.0066423546792289045, 'lheV_pt > 50 & lheV_pt < 70 & lheNj == 4 & lheHT > 400': 0.0086906965415408915, 'lheV_pt > 180 & lheNj == 1 & lheHT > 200 & lheHT < 400': 0.0082666717884355475, 'lheV_pt > 180 & lheNj == 4 & lheHT < 200': 0.0075602682698187474, 'lheV_pt < 50 & lheNj == 2 & lheHT > 200 & lheHT < 400': 0.049407064997703525, 'lheV_pt > 50 & lheV_pt < 70 & lheNj == 4 & lheHT > 200 & lheHT < 400': 0.017819847230028458, 'lheV_pt > 50 & lheV_pt < 70 & lheNj == 3 & lheHT > 400': 0.0095405988072916198, 'lheV_pt < 50 & lheNj == 2 & lheHT < 200': 0.37080662439935153, 'lheV_pt > 70 & lheV_pt < 100 & lheNj == 1 & lheHT > 200 & lheHT < 400': 1.0, 'lheV_pt < 50 & lheNj == 4 & lheHT < 200': 0.028864387576089067, 'lheV_pt > 100 & lheV_pt < 180 & lheNj == 3 & lheHT > 400': 0.0064811924638318429, 'lheV_pt > 180 & lheNj == 2 & lheHT > 200 & lheHT < 400': 0.0083929531086752492, 'lheV_pt > 180 & lheNj == 0 & lheHT > 400': 1.0, 'lheV_pt > 50 & lheV_pt < 70 & lheNj == 4 & lheHT < 200': 0.025650144100582188, 'lheV_pt > 100 & lheV_pt < 180 & lheNj == 0 & lheHT < 200': 1.0, 'lheV_pt < 50 & lheNj == 3 & lheHT < 200': 0.038787130192935206, 'lheV_pt > 50 & lheV_pt < 70 & lheNj == 0 & lheHT < 200': 1.0, 'lheV_pt > 100 & lheV_pt < 180 & lheNj == 4 & lheHT < 200': 0.011083791273581611, 'lheV_pt < 50 & lheNj == 4 & lheHT > 400': 0.0090139295020936153, 'lheV_pt > 180 & lheNj == 0 & lheHT < 200': 1.0, 'lheV_pt < 50 & lheNj == 0 & lheHT > 400': 1.0, 'lheV_pt > 50 & lheV_pt < 70 & lheNj == 1 & lheHT < 200': 0.11063822972409612, 'lheV_pt < 50 & lheNj == 2 & lheHT > 400': 0.01241526777648407, 'lheV_pt > 70 & lheV_pt < 100 & lheNj == 3 & lheHT > 200 & lheHT < 400': 0.020843166338216181, 'lheV_pt > 180 & lheNj == 3 & lheHT < 200': 0.0081003886681790451, 'lheV_pt > 50 & lheV_pt < 70 & lheNj == 2 & lheHT > 400': 0.011830369682576017, 'lheV_pt < 50 & lheNj == 0 & lheHT > 200 & lheHT < 400': 1.0, 'lheV_pt > 70 & lheV_pt < 100 & lheNj == 4 & lheHT > 400': 0.0087551796722889468, 'lheV_pt > 100 & lheV_pt < 180 & lheNj == 0 & lheHT > 400': 1.0, 'lheV_pt > 180 & lheNj == 2 & lheHT < 200': 0.0098060278953205019, 'lheV_pt > 100 & lheV_pt < 180 & lheNj == 1 & lheHT > 400': 1.0, 'lheV_pt > 100 & lheV_pt < 180 & lheNj == 2 & lheHT > 400': 0.0073976372202621613, 'lheV_pt > 50 & lheV_pt < 70 & lheNj == 3 & lheHT < 200': 0.032719150123517955, 'lheV_pt < 50 & lheNj == 1 & lheHT > 400': 1.0, 'lheV_pt < 50 & lheNj == 4 & lheHT > 200 & lheHT < 400': 0.019292724061453548, 'lheV_pt > 100 & lheV_pt < 180 & lheNj == 4 & lheHT > 400': 0.0060844867293372226}
fileList = { 'DYJetsToLL_M-50_TuneZ2Star_8TeV-madgraph-tarball': 2950.0,\
  'DYJetsToLL_PtZ-50To70_TuneZ2star_8TeV-madgraph-tarball': 93.8,\
  'DYJetsToLL_PtZ-70To100_TuneZ2star_8TeV-madgraph-tarball': 52.31,\
  'DYJetsToLL_PtZ-100_TuneZ2star_8TeV-madgraph': 34.1,\
  'DYJetsToLL_PtZ-100_TuneZ2star_8TeV_ext-madgraph-tarball': 32.9,\
  'DYJetsToLL_PtZ-180_TuneZ2star_8TeV-madgraph-tarball': 5.4534,\
  'DY1JetsToLL_M-50_TuneZ2Star_8TeV-madgraph_procV2_mergeV1V2': 561.0,\
  'DY2JetsToLL_M-50_TuneZ2Star_8TeV-madgraph': 181.0,\
  'DY3JetsToLL_M-50_TuneZ2Star_8TeV-madgraph': 51.1,\
  'DY4JetsToLL_M-50_TuneZ2Star_8TeV-madgraph_mergeV1V2': 23.04,\
  'DYJetsToLL_HT-200To400_TuneZ2Star_8TeV-madgraph': 19.73,\
  'DYJetsToLL_HT-400ToInf_TuneZ2Star_8TeV-madgraph_procV2': 2.826}
prefix = <!Directories|samplepath!>/DiJetPt_
newpostfix = .root
lheBin = ['lheV_pt < 50 & lheNj == 0 & lheHT < 200',\
  'lheV_pt > 50 & lheV_pt < 70 & lheNj == 0 & lheHT < 200',\
  'lheV_pt > 70 & lheV_pt < 100 & lheNj == 0 & lheHT < 200',\
  'lheV_pt > 100 & lheV_pt < 180 & lheNj == 0 & lheHT < 200',\
  'lheV_pt > 180 & lheNj == 0 & lheHT < 200',\
  \
  'lheV_pt < 50 & lheNj == 1 & lheHT < 200',\
  'lheV_pt > 50 & lheV_pt < 70 & lheNj == 1 & lheHT < 200',\
  'lheV_pt > 70 & lheV_pt < 100 & lheNj == 1 & lheHT < 200',\
  'lheV_pt > 100 & lheV_pt < 180 & lheNj == 1 & lheHT < 200',\
  'lheV_pt > 180 & lheNj == 1 & lheHT < 200',\
  \
  'lheV_pt < 50 & lheNj == 2 & lheHT < 200',\
  'lheV_pt > 50 & lheV_pt < 70 & lheNj == 2 & lheHT < 200',\
  'lheV_pt > 70 & lheV_pt < 100 & lheNj == 2 & lheHT < 200',\
  'lheV_pt > 100 & lheV_pt < 180 & lheNj == 2 & lheHT < 200',\
  'lheV_pt > 180 & lheNj == 2 & lheHT < 200',\
  \
  'lheV_pt < 50 & lheNj == 3 & lheHT < 200',\
  'lheV_pt > 50 & lheV_pt < 70 & lheNj == 3 & lheHT < 200',\
  'lheV_pt > 70 & lheV_pt < 100 & lheNj == 3 & lheHT < 200',\
  'lheV_pt > 100 & lheV_pt < 180 & lheNj == 3 & lheHT < 200',\
  'lheV_pt > 180 & lheNj == 3 & lheHT < 200',\
  \
  'lheV_pt < 50 & lheNj == 4 & lheHT < 200',\
  'lheV_pt > 50 & lheV_pt < 70 & lheNj == 4 & lheHT < 200',\
  'lheV_pt > 70 & lheV_pt < 100 & lheNj == 4 & lheHT < 200',\
  'lheV_pt > 100 & lheV_pt < 180 & lheNj == 4 & lheHT < 200',\
  'lheV_pt > 180 & lheNj == 4 & lheHT < 200',\
  \
  'lheV_pt < 50 & lheNj == 0 & lheHT > 200 & lheHT < 400',\
  'lheV_pt > 50 & lheV_pt < 70 & lheNj == 0 & lheHT > 200 & lheHT < 400',\
  'lheV_pt > 70 & lheV_pt < 100 & lheNj == 0 & lheHT > 200 & lheHT < 400',\
  'lheV_pt > 100 & lheV_pt < 180 & lheNj == 0 & lheHT > 200 & lheHT < 400',\
  'lheV_pt > 180 & lheNj == 0 & lheHT > 200 & lheHT < 400',\
  \
  'lheV_pt < 50 & lheNj == 1 & lheHT > 200 & lheHT < 400',\
  'lheV_pt > 50 & lheV_pt < 70 & lheNj == 1 & lheHT > 200 & lheHT < 400',\
  'lheV_pt > 70 & lheV_pt < 100 & lheNj == 1 & lheHT > 200 & lheHT < 400',\
  'lheV_pt > 100 & lheV_pt < 180 & lheNj == 1 & lheHT > 200 & lheHT < 400',\
  'lheV_pt > 180 & lheNj == 1 & lheHT > 200 & lheHT < 400',\
  \
  'lheV_pt < 50 & lheNj == 2 & lheHT > 200 & lheHT < 400',\
  'lheV_pt > 50 & lheV_pt < 70 & lheNj == 2 & lheHT > 200 & lheHT < 400',\
  'lheV_pt > 70 & lheV_pt < 100 & lheNj == 2 & lheHT > 200 & lheHT < 400',\
  'lheV_pt > 100 & lheV_pt < 180 & lheNj == 2 & lheHT > 200 & lheHT < 400',\
  'lheV_pt > 180 & lheNj == 2 & lheHT > 200 & lheHT < 400',\
  \
  'lheV_pt < 50 & lheNj == 3 & lheHT > 200 & lheHT < 400',\
  'lheV_pt > 50 & lheV_pt < 70 & lheNj == 3 & lheHT > 200 & lheHT < 400',\
  'lheV_pt > 70 & lheV_pt < 100 & lheNj == 3 & lheHT > 200 & lheHT < 400',\
  'lheV_pt > 100 & lheV_pt < 180 & lheNj == 3 & lheHT > 200 & lheHT < 400',\
  'lheV_pt > 180 & lheNj == 3 & lheHT > 200 & lheHT < 400',\
  \
  'lheV_pt < 50 & lheNj == 4 & lheHT > 200 & lheHT < 400',\
  'lheV_pt > 50 & lheV_pt < 70 & lheNj == 4 & lheHT > 200 & lheHT < 400',\
  'lheV_pt > 70 & lheV_pt < 100 & lheNj == 4 & lheHT > 200 & lheHT < 400',\
  'lheV_pt > 100 & lheV_pt < 180 & lheNj == 4 & lheHT > 200 & lheHT < 400',\
  'lheV_pt > 180 & lheNj == 4 & lheHT > 200 & lheHT < 400',\
  \
  'lheV_pt < 50 & lheNj == 0 & lheHT > 400',\
  'lheV_pt > 50 & lheV_pt < 70 & lheNj == 0 & lheHT > 400',\
  'lheV_pt > 70 & lheV_pt < 100 & lheNj == 0 & lheHT > 400',\
  'lheV_pt > 100 & lheV_pt < 180 & lheNj == 0 & lheHT > 400',\
  'lheV_pt > 180 & lheNj == 0 & lheHT > 400',\
  \
  'lheV_pt < 50 & lheNj == 1 & lheHT > 400',\
  'lheV_pt > 50 & lheV_pt < 70 & lheNj == 1 & lheHT > 400',\
  'lheV_pt > 70 & lheV_pt < 100 & lheNj == 1 & lheHT > 400',\
  'lheV_pt > 100 & lheV_pt < 180 & lheNj == 1 & lheHT > 400',\
  'lheV_pt > 180 & lheNj == 1 & lheHT > 400',\
  \
  'lheV_pt < 50 & lheNj == 2 & lheHT > 400',\
  'lheV_pt > 50 & lheV_pt < 70 & lheNj == 2 & lheHT > 400',\
  'lheV_pt > 70 & lheV_pt < 100 & lheNj == 2 & lheHT > 400',\
  'lheV_pt > 100 & lheV_pt < 180 & lheNj == 2 & lheHT > 400',\
  'lheV_pt > 180 & lheNj == 2 & lheHT > 400',\
  \
  'lheV_pt < 50 & lheNj == 3 & lheHT > 400',\
  'lheV_pt > 50 & lheV_pt < 70 & lheNj == 3 & lheHT > 400',\
  'lheV_pt > 70 & lheV_pt < 100 & lheNj == 3 & lheHT > 400',\
  'lheV_pt > 100 & lheV_pt < 180 & lheNj == 3 & lheHT > 400',\
  'lheV_pt > 180 & lheNj == 3 & lheHT > 400',\
  \
  'lheV_pt < 50 & lheNj == 4 & lheHT > 400',\
  'lheV_pt > 50 & lheV_pt < 70 & lheNj == 4 & lheHT > 400',\
  'lheV_pt > 70 & lheV_pt < 100 & lheNj == 4 & lheHT > 400',\
  'lheV_pt > 100 & lheV_pt < 180 & lheNj == 4 & lheHT > 400',\
  'lheV_pt > 180 & lheNj == 4 & lheHT > 400'\
  ]

[General]
prefix =
newprefix = ZmmH.BestCSV.heppy.
;Put luminosity here
;lumi = 1280.23
lumi = 2190
;lumi = 20000
weightexpression = 1.

#!!Preselection cuts. Those cuts are applied on the sample during the prep step
pT = (Jet_pt[0] > 82. & Jet_pt[1] > 66. & Jet_pt[2] > 54. & Jet_pt[3] > 20. )
nJet = (nJet > 3)
preselectionCut = ((HLT_BIT_HLT_QuadPFJet_SingleBTagCSV_VBF_Mqq460_v) || (HLT_BIT_HLT_QuadPFJet_DoubleBTagCSV_VBF_Mqq200_v == 1)) & <!General|pT!> & <!General|nJet!>
datapreselectionCut =  (json == 1) & ((HLT_BIT_HLT_QuadPFJet_SingleBTagCSV_VBF_Mqq460_v) || (HLT_BIT_HLT_QuadPFJet_DoubleBTagCSV_VBF_Mqq200_v == 1)) & <!General|pT!> & <!General|nJet!>

#!! Dummie Parameters (to perform a first test of the code )
SF = 1
;!! Scale factors associated to subnames
SF_WJets = [1.,1.,1.,1.]
;SF_ZJets = [0.91448, 0.19264 , 0.19264]
;SF_ZJets = [0.95899, 0.82213, 0.82213]
SF_ZJets = [1., 1., 1.]
;SF_TTbar = 0.97397
SF_TTbar = 1
;SF_TTbar = 0.96448


;!! Samples subcuts associated to subnames
jetFlavour_subcuts=[
            'abs(Jet_mcFlavour[hJCidx[0]]) != 5 && abs(Jet_mcFlavour[hJCidx[0]]) != 4 && abs(Jet_mcFlavour[hJCidx[1]]) != 5 && abs(Jet_mcFlavour[hJCidx[1]]) != 4 ',
            '(abs(Jet_mcFlavour[hJCidx[0]]) != 5 && abs(Jet_mcFlavour[hJCidx[1]]) == 4) || (abs(Jet_mcFlavour[hJCidx[1]]) != 5 && abs(Jet_mcFlavour[hJCidx[0]]) == 4)',
            #;with the definition below, not HF enriched
            '(abs(Jet_mcFlavour[hJCidx[0]]) != 5 && abs(Jet_mcFlavour[hJCidx[1]]) == 5) || (abs(Jet_mcFlavour[hJCidx[1]]) != 5 && abs(Jet_mcFlavour[hJCidx[0]]) == 5)',
            'abs(Jet_mcFlavour[hJCidx[0]]) == 5 && abs(Jet_mcFlavour[hJCidx[1]]) == 5']
jetFlavour_ZHF_subcuts_v3=[
            'Sum$(GenJet_pt>20 && abs(GenJet_eta)<2.4 && GenJet_numBHadrons>0)<1',
            'Sum$(GenJet_pt>20 && abs(GenJet_eta)<2.4 && GenJet_numBHadrons>0)==1',
            'Sum$(GenJet_pt>20 && abs(GenJet_eta)<2.4 && GenJet_numBHadrons>0)>=2']


Wjets_sampleGroup=['WJets_light','WJets_c','WJets_1b','WJets_2b']
WjetsMad_sampleGroup=['WJetsMadHT_light','WJetsMadHT_c','WJetsMadHT_1b','WJetsMadHT_2b']
Zjets_sampleGroup_v3=['ZJets_udscg','ZJets_1b','ZJets_2b']
ZjetsMad_sampleGroup=['ZjetsMad_light','ZjetsMad_c','ZjetsMad_1b','ZjetsMad_2b']
VV_sampleGroup=['VV_light','VV_c','VV_1b','VV_2b']
VVpythia_sampleGroup=['VVpythia_udcsg','VVpythia_b','VVpythia_2b']

[Samples_running]
;!! If run_on_fileList is False you run using this config and checking that the sample are in the directory specify in your path config.
;!! If run_on_fileList is True you list all the file of your dir and you run using that list, checking in the config if there is a match.
;!! If you want to run on splitted samples you need to put True.
#! Set always to false
run_on_fileList=False


;V20 Data

; BTag
[VHBB_HEPPY_V20_BTagCSV__Run2015C_25ns-16Dec2015-v1]
sampleName = BTag_Run2015C_25ns_16Dec2015
sampleType = DATA
subsamples = False
sampleGroup = DATA
xSec = [1]
SF = 1
cut = <!General|datapreselectionCut!>

[VHBB_HEPPY_V20a_BTagCSV__Run2015D-16Dec2015-v1]
sampleName = BTag_Run2015D_16Dec2015
sampleType = DATA
subsamples = False
sampleGroup = DATA
xSec = [1]
SF = 1
cut = <!General|datapreselectionCut!>


;!! Warning: never end sampleName by _integer, otherwise the sample will be considered as splited

;#_*_*_*_*_*_*_*_*_*_*_*_*_*_*_*_*_*_*_*_*_*_*_*_*
;# DATA
;#_*_*_*_*_*_*_*_*_*_*_*_*_*_*_*_*_*_*_*_*_*_*_*_*

; for xSec, when using subsamples (for instance 4)
; the same cross section can be applied to all of them with
; xSec = [cros section]*4

;#_*_*_*_*_*_*_*_*_*_*_*_*_*_*_*_*_*_*_*_*_*_*_*_*
;# MONTE CARLO
;#_*_*_*_*_*_*_*_*_*_*_*_*_*_*_*_*_*_*_*_*_*_*_*_*


;#_*_*_*_*_*_*
;# SIGNAL
;#_*_*_*_*_*_*
; Add GF , ttH, VH

;[VBFHToBB_M-125_13TeV_powheg_pythia8_weightfix]
;sampleName = VBFHToBB_M-125_13TeV_powheg
;sampleType = SIG
;subsamples = False
;sampleGroup = VH
;xSec = [1]
;SF = 1
;cut = <!General|preselectionCut!>

;;DY inclusive
;[DYJetsToLL_M-50_TuneCUETP8M1_13TeV-madgraphMLM-pythia8]
;sampleName = DYJetsToLL_M-50_TuneCUETP8M1
;sampleType = BKG
;subsamples = False
;sampleGroup = DY
;xSec = [1]
;SF = 1 
;cut = <!General|preselectionCut!>

;;amc@nlo

;[DYJetsToLL_M-50_TuneCUETP8M1_13TeV-amcatnloFXFX-pythia8]
;sampleName = DYJetsToLL_M-50_TuneCUETP8M1_13TeV-amcatnloFXFX
;sampleType = BKG
;subsamples = False
;sampleGroup = DY
;xSec = [1]
;SF = 1 
;cut = <!General|preselectionCut!>


;#_*_*_*_*_*_*
;# T-TBAR
;#_*_*_*_*_*_*

;[TT_TuneCUETP8M1_13TeV-amcatnlo-pythia8]
;sampleName = TT_mad
;sampleType = BKG
;subsamples = False
;sampleGroup = TT_mad
;xSec = [1]
;SF = 1 
;cut = <!General|preselectionCut!>

;[TT_TuneCUETP8M1_13TeV-powheg-pythia8]
;sampleName = TT_pow
;sampleType = BKG
;subsamples = False
;sampleGroup = TT_pow
;xSec = [1]
;SF = 1 
;cut = <!General|preselectionCut!>

;#_*_*_*_*_*_*
;# SINGLE TOP
;#_*_*_*_*_*_*


;[ST_tW_antitop_5f_inclusiveDecays_13TeV-powheg-pythia8_TuneCUETP8M1]
;sampleName = ST_tW_antitop
;sampleType = BKG
;subsamples = False
;sampleGroup = tW
;xSec = [1]
;SF = 1 
;cut = <!General|preselectionCut!>

;[ST_tW_top_5f_inclusiveDecays_13TeV-powheg-pythia8_TuneCUETP8M1]
;sampleName = ST_tW_top
;sampleType = BKG
;subsamples = False
;sampleGroup = tW
;xSec = [1]
;SF = 1 
;cut = <!General|preselectionCut!>

;#_*_*_*_*_*_*
;#OTHER W + JETS
;#_*_*_*_*_*_*

;[WJetsToLNu_TuneCUETP8M1_13TeV-madgraphMLM-pythia8]
;sampleName = WJetsToLNu_TuneCUETP8M1
;sampleType = BKG
;subsamples = False
;sampleGroup = tW
;xSec = [1]
;SF = 1 
;cut = <!General|preselectionCut!>



;#_*_*_*_*_*_*
;# QCD HT BINNED
;#_*_*_*_*_*_*

;[QCD_HT100to200_TuneCUETP8M1_13TeV-madgraphMLM-pythia8]
;sampleName = QCD_HT100to200_TuneCUETP8M1
;sampleType = BKG
;subsamples = False
;sampleGroup = QCD
;xSec = [1]
;SF = 1 
;cut = <!General|preselectionCut!>

;[QCD_HT200to300_TuneCUETP8M1_13TeV-madgraphMLM-pythia8]
;sampleName = QCD_HT200to300_TuneCUETP8M1
;sampleType = BKG
;subsamples = False
;sampleGroup = QCD
;xSec = [1]
;SF = 1 
;cut = <!General|preselectionCut!>

;[QCD_HT300to500_TuneCUETP8M1_13TeV-madgraphMLM-pythia8]
;sampleName = QCD_HT300to500_TuneCUETP8M1
;sampleType = BKG
;subsamples = False
;sampleGroup = QCD
;xSec = [1]
;SF = 1 
;cut = <!General|preselectionCut!>

;[QCD_HT500to700_TuneCUETP8M1_13TeV-madgraphMLM-pythia8]
;sampleName = QCD_HT500to700_TuneCUETP8M1
;sampleType = BKG
;subsamples = False
;sampleGroup = QCD
;xSec = [1]
;SF = 1 
;cut = <!General|preselectionCut!>

;[QCD_HT700to1000_TuneCUETP8M1_13TeV-madgraphMLM-pythia8]
;sampleName = QCD_HT700to1000_TuneCUETP8M1
;sampleType = BKG
;subsamples = False
;sampleGroup = QCD
;xSec = [1]
;SF = 1 
;cut = <!General|preselectionCut!>

;[QCD_HT1000to1500_TuneCUETP8M1_13TeV-madgraphMLM-pythia8]
;sampleName = QCD_HT1000to1500_TuneCUETP8M1
;sampleType = BKG
;subsamples = False
;sampleGroup = QCD
;xSec = [1]
;SF = 1 
;cut = <!General|preselectionCut!>

;[QCD_HT1500to2000_TuneCUETP8M1_13TeV-madgraphMLM-pythia8]
;sampleName = QCD_HT1500to2000_TuneCUETP8M1
;sampleType = BKG
;subsamples = False
;sampleGroup = QCD
;xSec = [1]
;SF = 1 
;cut = <!General|preselectionCut!>

;[QCD_HT2000toInf_TuneCUETP8M1_13TeV-madgraphMLM-pythia8]
;sampleName = QCD_HT2000toInf_TuneCUETP8M1
;sampleType = BKG
;subsamples = False
;sampleGroup = QCD
;xSec = [1]
;SF = 1 
;cut = <!General|preselectionCut!>







